doctype html

html.h-100(lang="en")
    include includes/head
    body.h-100.font-roboto
        div.modal.fade#modal-add(tabindex="-1" role="dialog")
            div.modal-dialog(role="document")
                div.modal-content
                    div.modal-header
                        h5.modal-title Add Mobility
                        button.close(type="button" data-dismiss="modal")
                            span x
                    div.modal-body
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Origin
                                input.form-control#add-origin(type="text" placeholder="Origin")
                                input.form-control#add-originLat(type="hidden")
                                input.form-control#add-originLng(type="hidden")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Origin Partner
                                select.form-control#add-IDOriginPartner
                                    each partner in partners
                                        option(value=partner.ID)= partner.name
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Destination
                                input.form-control#add-target(type="text" placeholder="Destination")
                                input.form-control#add-targetLat(type="hidden")
                                input.form-control#add-targetLng(type="hidden")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Target Partner
                                select.form-control#add-IDTargetPartner
                                    each partner in partners
                                        option(value=partner.ID)= partner.name
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Departure
                                input.form-control#add-departureDate(type="date")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Return
                                input.form-control#add-arrivalDate(type="date")
                        div.form-group.mb-0
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Project
                                select.form-control#add-IDProject
                                    each project in projects
                                        option(value=project.ID)= project.name
                    div.modal-footer
                        button.btn.btn-success.mr-auto.w-25#modal-add-btn Add
        div.modal.fade#modal-edit(tabindex="-1" role="dialog")
            div.modal-dialog(role="document")
                div.modal-content
                    div.modal-header
                        h5.modal-title Edit Mobility
                        button.close(type="button" data-dismiss="modal")
                            span x
                    div.modal-body
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Origin
                                input.form-control#edit-origin(type="text" placeholder="Origin")
                                input.form-control#edit-originLat(type="hidden")
                                input.form-control#edit-originLng(type="hidden")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Origin Partner
                                select.form-control#edit-IDOriginPartner
                                    each partner in partners
                                        option(value=partner.ID)= partner.name
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Destination
                                input.form-control#edit-target(type="text" placeholder="Destination")
                                input.form-control#edit-targetLat(type="hidden")
                                input.form-control#edit-targetLng(type="hidden")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Target Partner
                                select.form-control#edit-IDTargetPartner
                                    each partner in partners
                                        option(value=partner.ID)= partner.name
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Departure
                                input.form-control#edit-departureDate(type="date")
                        div.form-group
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Return
                                input.form-control#edit-arrivalDate(type="date")
                        div.form-group.mb-0
                            div.input-group
                                div.input-group-prepend.w-25
                                    div.input-group-text.w-100 Project
                                select.form-control#edit-IDProject
                                    each project in projects
                                        option(value=project.ID)= project.name
                    div.modal-footer
                        button.btn.btn-info.mr-auto.w-25#modal-edit-btn Edit

        div.container-fluid.m-0.p-0.h-100
            include includes/header
            if session.ID != null
                div.p-5.position-absolute.bottom-0px.top-76px.left-0px.right-0px
                    div.container.rounded.p-4.bg-light.shadow.h-max-100.d-flex.flex-flow-column
                        h2.mb-3.text-dark
                            span.border-bottom-3px.border-top-3px.border-dark.px-2 Mobilities
                        include includes/add_edit_delete_btns
                        div.table-responsive.rounded.dark-scroll
                            table(data-table="mobilities").table.table-bordered.table-hover.table-dark.nowrap.m-0#table
                                thead
                                    tr.table-headers
                                        th(scope="col" data-field="ID").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px.shadow-left-dark-1px #
                                        th(scope="col" data-field="origin" data-is-location="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Origin
                                        th.d-none(scope="col" data-field="originLat" data-is-hidden="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Origin Lat
                                        th.d-none(scope="col" data-field="originLng" data-is-hidden="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Origin Lng
                                        th.d-none(scope="col" data-is-hidden="true" data-field="IDOriginPartner").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Origin Partner
                                        th(scope="col" data-field="target" data-is-location="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Destination
                                        th.d-none(scope="col" data-field="targetLat" data-is-hidden="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Destination Lat
                                        th.d-none(scope="col" data-field="targetLng" data-is-hidden="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Destination Lng
                                        th.d-none(scope="col" data-is-hidden="true" data-field="IDTargetPartner").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Target Partner
                                        th(scope="col" data-field="departureDate").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Departure
                                        th(scope="col" data-field="arrivalDate").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Return
                                        th(scope="col" data-field="IDProject" data-wrap="true").position-sticky.top-0px.bg-darkest.shadow-top-solid-1px.shadow-bottom-dark-1px.shadow-top-dark-1px.shadow-right-dark-1px Project
                                tbody
                                    each mobility in mobilities
                                        tr.table-row
                                            th(scope="row").id-field= mobility.ID
                                            td= mobility.origin
                                            td.d-none= mobility.originLat
                                            td.d-none= mobility.originLng
                                            td.d-none= mobility.originPartner
                                            td= mobility.target
                                            td.d-none= mobility.targetLat
                                            td.d-none= mobility.targetLng
                                            td.d-none= mobility.targetPartner
                                            td= mobility.departureDate.getFullYear() + "-" + ("0" + (mobility.departureDate.getMonth() + 1)).slice(-2) + "-" + ("0" + mobility.departureDate.getDate()).slice(-2)
                                            td= mobility.arrivalDate.getFullYear() + "-" + ("0" + (mobility.arrivalDate.getMonth() + 1)).slice(-2) + "-" + ("0" + mobility.arrivalDate.getDate()).slice(-2)
                                            td.wrap= mobility.project
            else
                include includes/loginErrorMessage
            footer.fixed-bottom
                span.bg-light.p-2 Made by: Vasco Raminhos©

        script(src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBUnqjJiIN-nXdXiPVrnIyDqQ7fLUTtolk" async defer)
        include includes/scripts
