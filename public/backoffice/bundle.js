var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function a(e){e.forEach(n)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t,n){const o=t.subscribe(n);e.$$.on_destroy.push(o.unsubscribe?()=>o.unsubscribe():o)}function s(e,t,n){if(e){const o=d(e,t,n);return e[0](o)}}function d(e,n,o){return e[1]?t({},t(n.$$scope.ctx,e[1](o?o(n):{}))):n.$$scope.ctx}function c(e,n,o,a){return e[1]?t({},t(n.$$scope.changed||{},e[1](a?a(o):{}))):n.$$scope.changed||{}}function u(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function p(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function _(){return b(" ")}function v(){return b("")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function w(e,t){for(const n in t)"style"===n?e.style.cssText=t[n]:n in e?e[n]=t[n]:y(e,n,t[n])}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}let x;function T(e){x=e}function O(){if(!x)throw new Error("Function called outside component initialization");return x}function N(){const e=x;return(t,n)=>{const o=e.$$.callbacks[t];if(o){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,a)})}}}function R(e,t){O().$$.context.set(e,t)}function I(e){return O().$$.context.get(e)}const D=[],M=Promise.resolve();let j=!1;const A=[],E=[],C=[];function S(e){E.push(e)}function P(){const e=new Set;do{for(;D.length;){const e=D.shift();T(e),L(e.$$)}for(;A.length;)A.shift()();for(;E.length;){const t=E.pop();e.has(t)||(t(),e.add(t))}}while(D.length);for(;C.length;)C.pop()();j=!1}function L(e){e.fragment&&(e.update(e.dirty),a(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(S))}let B;function H(){B={remaining:0,callbacks:[]}}function z(){B.remaining||a(B.callbacks)}function q(e){B.callbacks.push(e)}function U(e,t){const n={},o={},a={$$scope:1};let l=e.length;for(;l--;){const r=e[l],i=t[l];if(i){for(const e in r)e in i||(o[e]=1);for(const e in i)a[e]||(n[e]=i[e],a[e]=1);e[l]=i}else for(const e in r)a[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function F(e,t,o){const{fragment:r,on_mount:i,on_destroy:s,after_render:d}=e.$$;r.m(t,o),S(()=>{const t=i.map(n).filter(l);s?s.push(...t):a(t),e.$$.on_mount=[]}),d.forEach(S)}function K(e,t){e.$$.dirty||(D.push(e),j||(j=!0,M.then(P)),e.$$.dirty=o()),e.$$.dirty[t]=!0}function G(t,n,l,r,i,s){const d=x;T(t);const c=n.props||{},u=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(d?d.$$.context:[]),callbacks:o(),dirty:null};let p=!1;var g;u.ctx=l?l(t,c,(e,n)=>{u.ctx&&i(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),p&&K(t,e))}):c,u.update(),p=!0,a(u.before_render),u.fragment=r(u.ctx),n.target&&(n.hydrate?u.fragment.l((g=n.target,Array.from(g.childNodes))):u.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),F(t,n.target,n.anchor),P()),T(d)}class V{$destroy(){var t,n;n=!0,(t=this).$$&&(a(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function X(t,n=e){let o;const a=[];function l(e){if(r(t,e)){if(t=e,!o)return;a.forEach(e=>e[1]()),a.forEach(e=>e[0](t))}}return{set:l,update:function(e){l(e(t))},subscribe:function(r,i=e){const s=[r,i];return a.push(s),1===a.length&&(o=n(l)||e),r(t),()=>{const e=a.indexOf(s);-1!==e&&a.splice(e,1),0===a.length&&o()}}}}function J(t,n,o){const r=!Array.isArray(t),i=r?[t]:t,s=n.length<2,d=[],c={subscribe:X(o,t=>{let o=!1;const c=[];let u=0,p=e;const g=()=>{if(u)return;p();const o=n(r?c[0]:c,t);s?t(o):p=l(o)?o:e},f=i.map((e,t)=>e.subscribe(e=>{c[t]=e,u&=~(1<<t),o&&g()},()=>{a(d),u|=1<<t}));return o=!0,g(),function(){a(f),p()}}).subscribe};return{subscribe(t,n=e){d.push(n);const o=c.subscribe(t,n);return()=>{const e=d.indexOf(n);-1!==e&&d.splice(e,1),o()}}}}const Y={},Q={};function W(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}const Z=function(e,t){const n=[];let o=W(e);return{get location(){return o},listen(t){n.push(t);const a=()=>{o=W(e),t({location:o,action:"POP"})};return e.addEventListener("popstate",a),()=>{e.removeEventListener("popstate",a);const o=n.indexOf(t);n.splice(o,1)}},navigate(t,{state:a,replace:l=!1}={}){a={...a,key:Date.now()+""};try{l?e.history.replaceState(a,null,t):e.history.pushState(a,null,t)}catch(n){e.location[l?"replace":"assign"](t)}o=W(e),n.forEach(e=>e({location:o,action:"PUSH"}))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(e="/"){let t=0;const n=[{pathname:e,search:""}],o=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return o[t]},pushState(e,a,l){const[r,i=""]=l.split("?");t++,n.push({pathname:r,search:i}),o.push(e)},replaceState(e,a,l){const[r,i=""]=l.split("?");n[t]={pathname:r,search:i},o[t]=e}}}}()),{navigate:ee}=Z,te=/^:(.+)/,ne=4,oe=3,ae=2,le=1,re=1;function ie(e,t){return e.substr(0,t.length)===t}function se(e){return"*"===e[0]}function de(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function ce(e){return e.replace(/(^\/+|\/+$)/g,"")}function ue(e,t){return{route:e,score:e.default?0:de(e.path).reduce((e,t)=>(e+=ne,!function(e){return""===e}(t)?!function(e){return te.test(e)}(t)?se(t)?e-=ne+le:e+=oe:e+=ae:e+=re,e),0),index:t}}function pe(e,t){let n,o;const[a]=t.split("?"),l=de(a),r=""===l[0],i=function(e){return e.map(ue).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)}(e);for(let e=0,a=i.length;e<a;e++){const a=i[e].route;let s=!1;if(a.default){o={route:a,params:{},uri:t};continue}const d=de(a.path),c={},u=Math.max(l.length,d.length);let p=0;for(;p<u;p++){const e=d[p],t=l[p];if(void 0!==e&&se(e)){c["*"===e?"*":e.slice(1)]=l.slice(p).map(decodeURIComponent).join("/");break}if(void 0===t){s=!0;break}let n=te.exec(e);if(n&&!r){const e=decodeURIComponent(t);c[n[1]]=e}else if(e!==t){s=!0;break}}if(!s){n={route:a,params:c,uri:"/"+l.slice(0,p).join("/")};break}}return n||o||null}function ge(e,t){return e+(t?`?${t}`:"")}function fe(e,t){return`${ce("/"===t?e:`${ce(e)}/${ce(t)}`)}/`}function me(e){var t;const n=e.$$slots.default,o=s(n,e,null);return{c(){o&&o.c()},l(e){o&&o.l(e)},m(e,n){o&&o.m(e,n),t=!0},p(e,t){o&&o.p&&e.$$scope&&o.p(c(n,t,e,null),d(n,t,null))},i(e){t||(o&&o.i&&o.i(e),t=!0)},o(e){o&&o.o&&o.o(e),t=!1},d(e){o&&o.d(e)}}}function he(e,t,n){let o,a,l,{basepath:r="/",url:s=null}=t;const d=I(Y),c=I(Q),u=X([]);i(e,u,e=>{n("$routes",l=e)});const p=X(null);let g=!1;const f=d||X(s?{pathname:s}:Z.location);i(e,f,e=>{n("$location",a=e)});const m=c?c.routerBase:X({path:r,uri:r});i(e,m,e=>{n("$base",o=e)});const h=J([m,p],([e,t])=>{if(null===t)return e;const{path:n}=e,{route:o,uri:a}=t;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:a}});var b;d||(b=(()=>Z.listen(e=>{f.set(e.location)})),O().$$.on_mount.push(b),R(Y,f)),R(Q,{activeRoute:p,base:m,routerBase:h,registerRoute:function(e){const{path:t}=o;let{path:n}=e;if(e._path=n,e.path=fe(t,n),"undefined"==typeof window){if(g)return;const t=function(e,t){return pe([e],t)}(e,a.pathname);t&&(p.set(t),g=!0)}else u.update(t=>(t.push(e),t))},unregisterRoute:function(e){u.update(t=>{const n=t.indexOf(e);return t.splice(n,1),t})}});let{$$slots:_={},$$scope:v}=t;return e.$set=(e=>{"basepath"in e&&n("basepath",r=e.basepath),"url"in e&&n("url",s=e.url),"$$scope"in e&&n("$$scope",v=e.$$scope)}),e.$$.update=((e={$base:1,$routes:1,$location:1})=>{if(e.$base){const{path:e}=o;u.update(t=>(t.forEach(t=>t.path=fe(e,t._path)),t))}if(e.$routes||e.$location){const e=pe(l,a.pathname);p.set(e)}}),{basepath:r,url:s,routes:u,location:f,base:m,$$slots:_,$$scope:v}}class be extends V{constructor(e){super(),G(this,e,he,me,r,["basepath","url"])}}function _e(e){var t,n,o,a,l=[$e,ve],r=[];function i(e){return null!==e.component?0:1}return t=i(e),n=r[t]=l[t](e),{c(){n.c(),o=v()},m(e,n){r[t].m(e,n),g(e,o,n),a=!0},p(e,a){var s=t;(t=i(a))===s?r[t].p(e,a):(H(),q(()=>{r[s].d(1),r[s]=null}),n.o(1),z(),(n=r[t])||(n=r[t]=l[t](a)).c(),n.i(1),n.m(o.parentNode,o))},i(e){a||(n&&n.i(),a=!0)},o(e){n&&n.o(),a=!1},d(e){r[t].d(e),e&&f(o)}}}function ve(e){var t;const n=e.$$slots.default,o=s(n,e,null);return{c(){o&&o.c()},l(e){o&&o.l(e)},m(e,n){o&&o.m(e,n),t=!0},p(e,t){o&&o.p&&e.$$scope&&o.p(c(n,t,e,null),d(n,t,null))},i(e){t||(o&&o.i&&o.i(e),t=!0)},o(e){o&&o.o&&o.o(e),t=!1},d(e){o&&o.d(e)}}}function $e(e){var n,o,a=[e.routeParams,e.routeProps],l=e.component;function r(e){let n={};for(var o=0;o<a.length;o+=1)n=t(n,a[o]);return{props:n}}if(l)var i=new l(r());return{c(){i&&i.$$.fragment.c(),n=v()},m(e,t){i&&F(i,e,t),g(e,n,t),o=!0},p(e,t){var o=e.routeParams||e.routeProps?U(a,[e.routeParams&&t.routeParams,e.routeProps&&t.routeProps]):{};if(l!==(l=t.component)){if(i){H();const e=i;q(()=>{e.$destroy()}),e.$$.fragment.o(1),z()}l?((i=new l(r())).$$.fragment.c(),i.$$.fragment.i(1),F(i,n.parentNode,n)):i=null}else l&&i.$set(o)},i(e){o||(i&&i.$$.fragment.i(e),o=!0)},o(e){i&&i.$$.fragment.o(e),o=!1},d(e){e&&f(n),i&&i.$destroy(e)}}}function ye(e){var t,n,o=null!==e.$activeRoute&&e.$activeRoute.route===e.route&&_e(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){null!==n.$activeRoute&&n.$activeRoute.route===n.route?o?(o.p(e,n),o.i(1)):((o=_e(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}function we(e,n,o){let a,{path:l="",component:r=null}=n;const{registerRoute:s,unregisterRoute:d,activeRoute:c}=I(Q);i(e,c,e=>{o("$activeRoute",a=e)});const p={path:l,default:""===l};let g={},f={};var m;s(p),"undefined"!=typeof window&&(m=(()=>{d(p)}),O().$$.on_destroy.push(m));let{$$slots:h={},$$scope:b}=n;return e.$set=(e=>{o("$$props",n=t(t({},n),e)),"path"in n&&o("path",l=n.path),"component"in n&&o("component",r=n.component),"$$scope"in e&&o("$$scope",b=e.$$scope)}),e.$$.update=((e={$activeRoute:1,$$props:1})=>{e.$activeRoute&&a&&a.route===p&&o("routeParams",g=a.params);{const{path:e,component:t,...a}=n;o("routeProps",f=a)}}),{path:l,component:r,activeRoute:c,route:p,routeParams:g,routeProps:f,$activeRoute:a,$$props:n=u(n),$$slots:h,$$scope:b}}class ke extends V{constructor(e){super(),G(this,e,we,ye,r,["path","component"])}}function xe(e){var n,o,a;const l=e.$$slots.default,r=s(l,e,null);for(var i=[{href:e.href},{"aria-current":e.ariaCurrent},e.props],u={},p=0;p<i.length;p+=1)u=t(u,i[p]);return{c(){n=h("a"),r&&r.c(),w(n,u),a=$(n,"click",e.onClick)},l(e){r&&r.l(a_nodes)},m(e,t){g(e,n,t),r&&r.m(n,null),o=!0},p(e,t){r&&r.p&&e.$$scope&&r.p(c(l,t,e,null),d(l,t,null)),w(n,U(i,[e.href&&{href:t.href},e.ariaCurrent&&{"aria-current":t.ariaCurrent},e.props&&t.props]))},i(e){o||(r&&r.i&&r.i(e),o=!0)},o(e){r&&r.o&&r.o(e),o=!1},d(e){e&&f(n),r&&r.d(e),a()}}}function Te(e,t,n){let o,a,{to:l="#",replace:r=!1,state:s={},getProps:d=(()=>({}))}=t;const{base:c}=I(Q);i(e,c,e=>{n("$base",o=e)});const u=I(Y);i(e,u,e=>{n("$location",a=e)});const p=N();let g,f,m,h;let b,{$$slots:_={},$$scope:v}=t;return e.$set=(e=>{"to"in e&&n("to",l=e.to),"replace"in e&&n("replace",r=e.replace),"state"in e&&n("state",s=e.state),"getProps"in e&&n("getProps",d=e.getProps),"$$scope"in e&&n("$$scope",v=e.$$scope)}),e.$$.update=((e={to:1,$base:1,$location:1,href:1,isCurrent:1,getProps:1,isPartiallyCurrent:1})=>{(e.to||e.$base)&&n("href",g="/"===l?o.uri:function(e,t){if(ie(e,"/"))return e;const[n,o]=e.split("?"),[a]=t.split("?"),l=de(n),r=de(a);if(""===l[0])return ge(a,o);if(!ie(l[0],"."))return ge(("/"===a?"":"/")+r.concat(l).join("/"),o);const i=r.concat(l),s=[];return i.forEach(e=>{".."===e?s.pop():"."!==e&&s.push(e)}),ge("/"+s.join("/"),o)}(l,o.uri)),(e.$location||e.href)&&n("isPartiallyCurrent",f=ie(a.pathname,g)),(e.href||e.$location)&&n("isCurrent",m=g===a.pathname),e.isCurrent&&n("ariaCurrent",b=m?"page":void 0),(e.getProps||e.$location||e.href||e.isPartiallyCurrent||e.isCurrent)&&n("props",h=d({location:a,href:g,isPartiallyCurrent:f,isCurrent:m}))}),{to:l,replace:r,state:s,getProps:d,base:c,location:u,href:g,props:h,onClick:function(e){if(p("click",e),function(e){return!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)){e.preventDefault();const t=a.pathname===g||r;ee(g,{state:s,replace:t})}},ariaCurrent:b,$$slots:_,$$scope:v}}class Oe extends V{constructor(e){super(),G(this,e,Te,xe,r,["to","replace","state","getProps"])}}var Ne=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}},Re=Object.prototype.toString;function Ie(e){return"[object Array]"===Re.call(e)}function De(e){return null!==e&&"object"==typeof e}function Me(e){return"[object Function]"===Re.call(e)}function je(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ie(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var Ae={isArray:Ie,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Re.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:De,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===Re.call(e)},isFile:function(e){return"[object File]"===Re.call(e)},isBlob:function(e){return"[object Blob]"===Re.call(e)},isFunction:Me,isStream:function(e){return De(e)&&Me(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:je,merge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]=n}for(var o=0,a=arguments.length;o<a;o++)je(arguments[o],n);return t},deepMerge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]="object"==typeof n?e({},n):n}for(var o=0,a=arguments.length;o<a;o++)je(arguments[o],n);return t},extend:function(e,t,n){return je(t,function(t,o){e[o]=n&&"function"==typeof t?Ne(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function Ee(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ce=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(Ae.isURLSearchParams(t))o=t.toString();else{var a=[];Ae.forEach(t,function(e,t){null!=e&&(Ae.isArray(e)?t+="[]":e=[e],Ae.forEach(e,function(e){Ae.isDate(e)?e=e.toISOString():Ae.isObject(e)&&(e=JSON.stringify(e)),a.push(Ee(t)+"="+Ee(e))}))}),o=a.join("&")}if(o){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e};function Se(){this.handlers=[]}Se.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Se.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Se.prototype.forEach=function(e){Ae.forEach(this.handlers,function(t){null!==t&&e(t)})};var Pe=Se,Le=function(e,t,n){return Ae.forEach(n,function(n){e=n(e,t)}),e},Be=function(e){return!(!e||!e.__CANCEL__)},He=function(e,t){Ae.forEach(e,function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])})},ze=function(e,t,n,o,a){return function(e,t,n,o,a){return e.config=t,n&&(e.code=n),e.request=o,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,o,a)},qe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ue=Ae.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=Ae.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Fe=Ae.isStandardBrowserEnv()?{write:function(e,t,n,o,a,l){var r=[];r.push(e+"="+encodeURIComponent(t)),Ae.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),Ae.isString(o)&&r.push("path="+o),Ae.isString(a)&&r.push("domain="+a),!0===l&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ke=function(e){return new Promise(function(t,n){var o=e.data,a=e.headers;Ae.isFormData(o)&&delete a["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var r=e.auth.username||"",i=e.auth.password||"";a.Authorization="Basic "+btoa(r+":"+i)}if(l.open(e.method.toUpperCase(),Ce(e.url,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,l.onreadystatechange=function(){if(l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var o,a,r,i,s,d="getAllResponseHeaders"in l?(o=l.getAllResponseHeaders(),s={},o?(Ae.forEach(o.split("\n"),function(e){if(i=e.indexOf(":"),a=Ae.trim(e.substr(0,i)).toLowerCase(),r=Ae.trim(e.substr(i+1)),a){if(s[a]&&qe.indexOf(a)>=0)return;s[a]="set-cookie"===a?(s[a]?s[a]:[]).concat([r]):s[a]?s[a]+", "+r:r}}),s):s):null,c={data:e.responseType&&"text"!==e.responseType?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:d,config:e,request:l};!function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(ze("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,c),l=null}},l.onabort=function(){l&&(n(ze("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(ze("Network Error",e,null,l)),l=null},l.ontimeout=function(){n(ze("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",l)),l=null},Ae.isStandardBrowserEnv()){var s=Fe,d=(e.withCredentials||Ue(e.url))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}if("setRequestHeader"in l&&Ae.forEach(a,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete a[t]:l.setRequestHeader(t,e)}),e.withCredentials&&(l.withCredentials=!0),e.responseType)try{l.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){l&&(l.abort(),n(e),l=null)}),void 0===o&&(o=null),l.send(o)})},Ge={"Content-Type":"application/x-www-form-urlencoded"};function Ve(e,t){!Ae.isUndefined(e)&&Ae.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Xe,Je={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?Xe=Ke:"undefined"!=typeof XMLHttpRequest&&(Xe=Ke),Xe),transformRequest:[function(e,t){return He(t,"Accept"),He(t,"Content-Type"),Ae.isFormData(e)||Ae.isArrayBuffer(e)||Ae.isBuffer(e)||Ae.isStream(e)||Ae.isFile(e)||Ae.isBlob(e)?e:Ae.isArrayBufferView(e)?e.buffer:Ae.isURLSearchParams(e)?(Ve(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ae.isObject(e)?(Ve(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};Je.headers={common:{Accept:"application/json, text/plain, */*"}},Ae.forEach(["delete","get","head"],function(e){Je.headers[e]={}}),Ae.forEach(["post","put","patch"],function(e){Je.headers[e]=Ae.merge(Ge)});var Ye=Je;function Qe(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var We=function(e){var t,n,o;return Qe(e),e.baseURL&&(o=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(o))&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=Le(e.data,e.headers,e.transformRequest),e.headers=Ae.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Ae.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Ye.adapter)(e).then(function(t){return Qe(e),t.data=Le(t.data,t.headers,e.transformResponse),t},function(t){return Be(t)||(Qe(e),t&&t.response&&(t.response.data=Le(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Ze=function(e,t){t=t||{};var n={};return Ae.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(n[e]=t[e])}),Ae.forEach(["headers","auth","proxy"],function(o){Ae.isObject(t[o])?n[o]=Ae.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:Ae.isObject(e[o])?n[o]=Ae.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])}),Ae.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(o){void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o])}),n};function et(e){this.defaults=e,this.interceptors={request:new Pe,response:new Pe}}et.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Ze(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[We,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},et.prototype.getUri=function(e){return e=Ze(this.defaults,e),Ce(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Ae.forEach(["delete","get","head","options"],function(e){et.prototype[e]=function(t,n){return this.request(Ae.merge(n||{},{method:e,url:t}))}}),Ae.forEach(["post","put","patch"],function(e){et.prototype[e]=function(t,n,o){return this.request(Ae.merge(o||{},{method:e,url:t,data:n}))}});var tt=et;function nt(e){this.message=e}nt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},nt.prototype.__CANCEL__=!0;var ot=nt;function at(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new ot(e),t(n.reason))})}at.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},at.source=function(){var e;return{token:new at(function(t){e=t}),cancel:e}};var lt=at;function rt(e){var t=new tt(e),n=Ne(tt.prototype.request,t);return Ae.extend(n,tt.prototype,t),Ae.extend(n,t),n}var it=rt(Ye);it.Axios=tt,it.create=function(e){return rt(Ze(it.defaults,e))},it.Cancel=ot,it.CancelToken=lt,it.isCancel=Be,it.all=function(e){return Promise.all(e)},it.spread=function(e){return function(t){return e.apply(null,t)}};var st=it,dt=it;st.default=dt;var ct=st;function ut(e){var t;return{c(){(t=h("img")).className="h-50px d-none d-sm-block",t.src="/../imgs/esl.png",t.alt="Logo ESL"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function pt(t){var n;return{c(){(n=h("li")).innerHTML='<span class="nav-link text-nowrap cursor-pointer" data-toggle="modal" data-target="#login-modal"><i class="fas fa-user"></i> Login</span>',n.className="nav-item"},m(e,t){g(e,n,t)},p:e,d(e){e&&f(n)}}}function gt(t){var n,o,a;return{c(){n=h("li"),(o=h("span")).innerHTML='<i class="fas fa-user"></i> Logout',o.className="nav-link text-nowrap cursor-pointer",n.className="nav-item",a=$(o,"click",t.handleLogoutClick)},m(e,t){g(e,n,t),p(n,o)},p:e,d(e){e&&f(n),a()}}}function ft(e){var t,n,o,a,l,r=new Oe({props:{class:"navbar-brand",to:"/backoffice/projects",$$slots:{default:[ut]},$$scope:{ctx:e}}});function i(e){return e.is_logged_in?gt:pt}var s=i(e),d=s(e);return{c(){t=h("header"),n=h("nav"),r.$$.fragment.c(),o=_(),a=h("ul"),d.c(),a.className="navbar-nav mr-2 ml-auto flex-row",n.className="navbar navbar-expand-xl navbar-dark bg-darker",t.className="sticky-top"},m(e,i){g(e,t,i),p(t,n),F(r,n,null),p(n,o),p(n,a),d.m(a,null),l=!0},p(e,t){var n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),r.$set(n),s===(s=i(t))&&d?d.p(e,t):(d.d(1),(d=s(t))&&(d.c(),d.m(a,null)))},i(e){l||(r.$$.fragment.i(e),l=!0)},o(e){r.$$.fragment.o(e),l=!1},d(e){e&&f(t),r.$destroy(),d.d()}}}function mt(e,t,n){let{is_logged_in:o,logout:a}=t;return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"logout"in e&&n("logout",a=e.logout)}),{is_logged_in:o,logout:a,handleLogoutClick:function(){a()}}}class ht extends V{constructor(e){super(),G(this,e,mt,ft,r,["is_logged_in","logout"])}}function bt(t){var n,o,l,r,i,s,d,c,u,m,b,v,w,k,x,T,O,N,R,I,D;return{c(){n=h("div"),o=h("div"),l=h("div"),(r=h("div")).innerHTML='<h5 class="modal-title">Login</h5>\n\t\t\t                <button class="close" type="button" data-dismiss="modal"><span>x</span></button>',i=_(),s=h("div"),d=h("div"),c=h("div"),(u=h("div")).innerHTML='<div class="input-group-text">Username</div>',m=_(),b=h("input"),v=_(),w=h("div"),k=h("div"),(x=h("div")).innerHTML='<div class="input-group-text">Password</div>',T=_(),O=h("input"),N=_(),R=h("div"),(I=h("button")).textContent="Login",r.className="modal-header",u.className="input-group-prepend",b.className="form-control",y(b,"type","text"),b.placeholder="Username",b.name="username",c.className="input-group",d.className="form-group",x.className="input-group-prepend",O.className="form-control",y(O,"type","password"),O.placeholder="Password",O.name="password",k.className="input-group",w.className="form-group mb-0",s.className="modal-body",I.className="btn btn-primary mr-auto w-25",R.className="modal-footer",l.className="modal-content",o.className="modal-dialog",y(o,"role","document"),n.className="modal fade",n.id="login-modal",n.tabIndex="-1",y(n,"role","dialog"),D=[$(b,"change",t.change_handler),$(O,"change",t.change_handler_1),$(I,"click",t.handleLoginClick)]},m(e,t){g(e,n,t),p(n,o),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(c,u),p(c,m),p(c,b),p(s,v),p(s,w),p(w,k),p(k,x),p(k,T),p(k,O),p(l,N),p(l,R),p(R,I)},p:e,i:e,o:e,d(e){e&&f(n),a(D)}}}function _t(e,t,n){let{login:o}=t,a="",l="";return e.$set=(e=>{"login"in e&&n("login",o=e.login)}),{login:o,username:a,password:l,handleLoginClick:function(e){o(a,l),window.$("#login-modal").modal("hide")},change_handler:function(e){const t=a=e.target.value;return n("username",a),t},change_handler_1:function(e){const t=l=e.target.value;return n("password",l),t}}}class vt extends V{constructor(e){super(),G(this,e,_t,bt,r,["login"])}}function $t(e,t,n){const o=Object.create(e);return o.action=t[n],o}function yt(e,t,n){const o=Object.create(e);return o.header=t[n],o.i=n,o}function wt(e,t,n){const o=Object.create(e);return o.row=t[n],o.i=n,o}function kt(e,t,n){const o=Object.create(e);return o.header=t[n],o.i=n,o}function xt(e){var t,n,o,a=e.header.columnName;return{c(){t=h("th"),n=b(a),t.scope="col",t.className=o="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px "+(e.header.actions?" text-center":"")+" svelte-r8msfx"},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.table_headers&&a!==(a=l.header.columnName)&&k(n,a),e.table_headers&&o!==(o="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px "+(l.header.actions?" text-center":"")+" svelte-r8msfx")&&(t.className=o)},d(e){e&&f(t)}}}function Tt(t){var n,o,a,l=t.row[t.header.key];return{c(){n=h("td"),o=b(l),n.className=a=t.header.wrap?"wrap":""},m(e,t){g(e,n,t),p(n,o)},p(e,t){(e.data||e.table_headers)&&l!==(l=t.row[t.header.key])&&k(o,l),e.table_headers&&a!==(a=t.header.wrap?"wrap":"")&&(n.className=a)},i:e,o:e,d(e){e&&f(n)}}}function Ot(t){var n,o,a="true"===t.row[t.header.key]&&Rt();function l(...e){return t.click_handler(t,...e)}return{c(){n=h("td"),a&&a.c(),n.className="toggler cursor-pointer text-center svelte-r8msfx",o=$(n,"click",l)},m(e,t){g(e,n,t),a&&a.m(n,null)},p(e,o){"true"===(t=o).row[t.header.key]?a||((a=Rt()).c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&f(n),a&&a.d(),o()}}}function Nt(e){for(var t,n,o=e.header.actions,a=[],l=0;l<o.length;l+=1)a[l]=Dt($t(e,o,l));function r(e,t,n){a[e]&&(t&&q(()=>{a[e].d(t),a[e]=null}),a[e].o(n))}return{c(){t=h("td");for(var e=0;e<a.length;e+=1)a[e].c();t.className="text-center vertical-align-middle"},m(e,o){g(e,t,o);for(var l=0;l<a.length;l+=1)a[l].m(t,null);n=!0},p(e,n){if(e.table_headers||e.data){o=n.header.actions;for(var l=0;l<o.length;l+=1){const r=$t(n,o,l);a[l]?(a[l].p(e,r),a[l].i(1)):(a[l]=Dt(r),a[l].c(),a[l].i(1),a[l].m(t,null))}for(H();l<a.length;l+=1)r(l,1,1);z()}},i(e){if(!n){for(var t=0;t<o.length;t+=1)a[t].i();n=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)r(e,0,0);n=!1},d(e){e&&f(t),m(a,e)}}}function Rt(e){var t;return{c(){(t=h("i")).className="fas fa-check"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function It(e){var t,n;return{c(){(t=h("i")).className=n=`fas ${e.action.icon} fa-fw cursor-pointer mr-1 text-light`+" svelte-r8msfx"},m(e,n){g(e,t,n)},p(e,o){e.table_headers&&n!==(n=`fas ${o.action.icon} fa-fw cursor-pointer mr-1 text-light`+" svelte-r8msfx")&&(t.className=n)},d(e){e&&f(t)}}}function Dt(e){var t,n=new Oe({props:{to:`${e.action.link}${e.row[e.action.query_field]}`,$$slots:{default:[It]},$$scope:{ctx:e}}});return{c(){n.$$.fragment.c()},m(e,o){F(n,e,o),t=!0},p(e,t){var o={};(e.table_headers||e.data)&&(o.to=`${t.action.link}${t.row[t.action.query_field]}`),(e.$$scope||e.table_headers)&&(o.$$scope={changed:e,ctx:t}),n.$set(o)},i(e){t||(n.$$.fragment.i(e),t=!0)},o(e){n.$$.fragment.o(e),t=!1},d(e){n.$destroy(e)}}}function Mt(e){var t,n,o,a,l=[Nt,Ot,Tt],r=[];function i(e){return e.header.actions?0:e.header.toggler?1:2}return t=i(e),n=r[t]=l[t](e),{c(){n.c(),o=v()},m(e,n){r[t].m(e,n),g(e,o,n),a=!0},p(e,a){var s=t;(t=i(a))===s?r[t].p(e,a):(H(),q(()=>{r[s].d(1),r[s]=null}),n.o(1),z(),(n=r[t])||(n=r[t]=l[t](a)).c(),n.i(1),n.m(o.parentNode,o))},i(e){a||(n&&n.i(),a=!0)},o(e){n&&n.o(),a=!1},d(e){r[t].d(e),e&&f(o)}}}function jt(e){for(var t,n,o,a,l,r=e.table_headers,i=[],s=0;s<r.length;s+=1)i[s]=Mt(yt(e,r,s));function d(e,t,n){i[e]&&(t&&q(()=>{i[e].d(t),i[e]=null}),i[e].o(n))}function c(...t){return e.click_handler_1(e,...t)}return{c(){t=h("tr");for(var a=0;a<i.length;a+=1)i[a].c();n=_(),t.className=o=-1===e.selectedRows.indexOf(e.row[e.selection_field])?"table-row":"table-row bg-secondary",l=$(t,"click",c)},m(e,o){g(e,t,o);for(var l=0;l<i.length;l+=1)i[l].m(t,null);p(t,n),a=!0},p(l,s){if(e=s,l.table_headers||l.data){r=e.table_headers;for(var c=0;c<r.length;c+=1){const o=yt(e,r,c);i[c]?(i[c].p(l,o),i[c].i(1)):(i[c]=Mt(o),i[c].c(),i[c].i(1),i[c].m(t,n))}for(H();c<i.length;c+=1)d(c,1,1);z()}(!a||l.selectedRows||l.data||l.selection_field)&&o!==(o=-1===e.selectedRows.indexOf(e.row[e.selection_field])?"table-row":"table-row bg-secondary")&&(t.className=o)},i(e){if(!a){for(var t=0;t<r.length;t+=1)i[t].i();a=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)d(e,0,0);a=!1},d(e){e&&f(t),m(i,e),l()}}}function At(e){for(var t,n,o,a,l,r,i,s=e.table_headers,d=[],c=0;c<s.length;c+=1)d[c]=xt(kt(e,s,c));var u=e.data,b=[];for(c=0;c<u.length;c+=1)b[c]=jt(wt(e,u,c));function v(e,t,n){b[e]&&(t&&q(()=>{b[e].d(t),b[e]=null}),b[e].o(n))}return{c(){t=h("div"),n=h("table"),o=h("thead"),a=h("tr");for(var e=0;e<d.length;e+=1)d[e].c();l=_(),r=h("tbody");for(e=0;e<b.length;e+=1)b[e].c();a.className="table-headers",n.className="table table-dark table-bordered table-scrollable table-hover nowrap m-0",t.className="table-responsive rounded dark-scroll"},m(e,s){g(e,t,s),p(t,n),p(n,o),p(o,a);for(var c=0;c<d.length;c+=1)d[c].m(a,null);p(n,l),p(n,r);for(c=0;c<b.length;c+=1)b[c].m(r,null);i=!0},p(e,t){if(e.table_headers){s=t.table_headers;for(var n=0;n<s.length;n+=1){const o=kt(t,s,n);d[n]?d[n].p(e,o):(d[n]=xt(o),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=s.length}if(e.selectedRows||e.data||e.selection_field||e.table_headers){u=t.data;for(n=0;n<u.length;n+=1){const o=wt(t,u,n);b[n]?(b[n].p(e,o),b[n].i(1)):(b[n]=jt(o),b[n].c(),b[n].i(1),b[n].m(r,null))}for(H();n<b.length;n+=1)v(n,1,1);z()}},i(e){if(!i){for(var t=0;t<u.length;t+=1)b[t].i();i=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)v(e,0,0);i=!1},d(e){e&&f(t),m(d,e),m(b,e)}}}function Et(e,t,n){let{getToken:o,table:a,table_headers:l,data:r,toggleRowSelect:i,selectedRows:s,selection_field:d,toggle_fields:c,onToggle:u}=t;function p(e){if(null!==e.ID)console.log("Hey"),ct.delete(`/api/delete/${a}`,{data:{rows:[e.ID]},headers:{Authorization:o()}}).then(e=>{u()}).catch(e=>{console.log(e.response)});else{console.log("Bye");let t={ID:null};console.log(c);for(let n=0;n<c.length;n++)console.log(c[n].field),t[c[n].field]=e[c[n].field];console.log(t),ct.post(`/api/insert/${a}`,t,{headers:{Authorization:o()}}).then(e=>{console.log("Successfully added relation"),u()}).catch(e=>{console.log(e.response)})}console.log(e)}function g(e,t){e.target.classList.contains("toggler")||e.target.parentElement.classList.contains("toggler")||i(t)}return e.$set=(e=>{"getToken"in e&&n("getToken",o=e.getToken),"table"in e&&n("table",a=e.table),"table_headers"in e&&n("table_headers",l=e.table_headers),"data"in e&&n("data",r=e.data),"toggleRowSelect"in e&&n("toggleRowSelect",i=e.toggleRowSelect),"selectedRows"in e&&n("selectedRows",s=e.selectedRows),"selection_field"in e&&n("selection_field",d=e.selection_field),"toggle_fields"in e&&n("toggle_fields",c=e.toggle_fields),"onToggle"in e&&n("onToggle",u=e.onToggle)}),{getToken:o,table:a,table_headers:l,data:r,toggleRowSelect:i,selectedRows:s,selection_field:d,toggle_fields:c,onToggle:u,handleToggleClick:p,handleRowClick:g,click_handler:function({row:e},t){p(e)},click_handler_1:function({row:e},t){g(t,e[d])}}}class Ct extends V{constructor(e){super(),G(this,e,Et,At,r,["getToken","table","table_headers","data","toggleRowSelect","selectedRows","selection_field","toggle_fields","onToggle"])}}function St(e,t,n){const o=Object.create(e);return o.option=t[n],o}function Pt(e,t,n){const o=Object.create(e);return o.field=t[n],o.i=n,o}function Lt(e){var t,n,o,a,l;function r(...t){return e.change_handler_2(e,...t)}return{c(){(t=h("input")).className="form-control",y(t,"type",n=e.field.type),t.value=o=e.field.value,t.placeholder=a=e.field.placeholder,l=$(t,"change",r)},m(e,n){g(e,t,n)},p(l,r){e=r,l.fields&&n!==(n=e.field.type)&&y(t,"type",n),l.fields&&o!==(o=e.field.value)&&(t.value=o),l.fields&&a!==(a=e.field.placeholder)&&(t.placeholder=a)},d(e){e&&f(t),l()}}}function Bt(e){var t,n,o,a;function l(...t){return e.change_handler_1(e,...t)}return{c(){(t=h("textarea")).className="form-control",t.placeholder=n=e.field.placeholder,t.value=o=e.field.value,a=$(t,"change",l)},m(e,n){g(e,t,n)},p(a,l){e=l,a.fields&&n!==(n=e.field.placeholder)&&(t.placeholder=n),a.fields&&o!==(o=e.field.value)&&(t.value=o)},d(e){e&&f(t),a()}}}function Ht(e){for(var t,n,o,a=""===e.field.value&&zt(),l=e.field.options,r=[],i=0;i<l.length;i+=1)r[i]=Ft(St(e,l,i));function s(...t){return e.change_handler(e,...t)}return{c(){t=h("select"),a&&a.c(),n=v();for(var e=0;e<r.length;e+=1)r[e].c();t.className="form-control",o=$(t,"change",s)},m(e,o){g(e,t,o),a&&a.m(t,null),p(t,n);for(var l=0;l<r.length;l+=1)r[l].m(t,null)},p(o,i){if(""===(e=i).field.value?a||((a=zt()).c(),a.m(t,n)):a&&(a.d(1),a=null),o.fields){l=e.field.options;for(var s=0;s<l.length;s+=1){const n=St(e,l,s);r[s]?r[s].p(o,n):(r[s]=Ft(n),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=l.length}},d(e){e&&f(t),a&&a.d(),m(r,e),o()}}}function zt(e){var t;return{c(){(t=h("option")).textContent="Choose an option",t.className="d-none",t.__value="null",t.value=t.__value,t.selected=!0,t.disabled=!0},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function qt(e){var t,n,o,a=e.option.display;return{c(){t=h("option"),n=b(a),t.__value=o=e.option.value,t.value=t.__value},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.fields&&a!==(a=l.option.display)&&k(n,a),e.fields&&o!==(o=l.option.value)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Ut(e){var t,n,o,a=e.option.display;return{c(){t=h("option"),n=b(a),t.__value=o=e.option.value,t.value=t.__value,t.selected=!0},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.fields&&a!==(a=l.option.display)&&k(n,a),e.fields&&o!==(o=l.option.value)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Ft(e){var t;function n(e){return e.field.value===e.option.value?Ut:qt}var o=n(e),a=o(e);return{c(){a.c(),t=v()},m(e,n){a.m(e,n),g(e,t,n)},p(e,l){o===(o=n(l))&&a?a.p(e,l):(a.d(1),(a=o(l))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&f(t)}}}function Kt(e){var t,n,o,a,l,r,i=e.field.display;function s(e){return"select"===e.field.type?Ht:"textarea"===e.field.type?Bt:Lt}var d=s(e),c=d(e);return{c(){t=h("div"),n=h("div"),o=h("div"),a=h("div"),l=b(i),r=_(),c.c(),a.className="input-group-text w-100",o.className="input-group-prepend w-25",n.className="input-group",t.className="form-group"},m(e,i){g(e,t,i),p(t,n),p(n,o),p(o,a),p(a,l),p(n,r),c.m(n,null)},p(e,t){e.fields&&i!==(i=t.field.display)&&k(l,i),d===(d=s(t))&&c?c.p(e,t):(c.d(1),(c=d(t))&&(c.c(),c.m(n,null)))},d(e){e&&f(t),c.d()}}}function Gt(t){for(var n,o,a,l,r,i,s,d,c,u,v,w,x,T,O,N,R,I,D,M,j="add"===t.mode?"Add":"Edit",A="add"===t.mode?"Add":"Edit",E=t.fields.fields,C=[],S=0;S<E.length;S+=1)C[S]=Kt(Pt(t,E,S));return{c(){n=h("div"),o=h("div"),a=h("div"),l=h("div"),r=h("h5"),i=b(j),s=_(),d=b(t.table_title),c=_(),(u=h("button")).innerHTML="<span>x</span>",v=_(),w=h("div");for(var e=0;e<C.length;e+=1)C[e].c();x=_(),T=h("div"),O=h("button"),N=b(A),r.className="modal-title",u.className="close",u.type="button",u.dataset.dismiss="modal",l.className="modal-header",w.className="modal-body",O.className=R="btn "+("add"===t.mode?"btn-success":"btn-info")+" w-100",O.id=I=`modal-${t.mode}-btn`,T.className="modal-footer",a.className="modal-content",o.className="modal-dialog",y(o,"role","document"),n.className="modal fade",n.id=D=`${t.mode}-modal`,n.tabIndex="-1",M=$(O,"click",t.handleSubmit)},m(e,t){g(e,n,t),p(n,o),p(o,a),p(a,l),p(l,r),p(r,i),p(r,s),p(r,d),p(l,c),p(l,u),p(a,v),p(a,w);for(var f=0;f<C.length;f+=1)C[f].m(w,null);p(a,x),p(a,T),p(T,O),p(O,N)},p(e,t){if(e.mode&&j!==(j="add"===t.mode?"Add":"Edit")&&k(i,j),e.table_title&&k(d,t.table_title),e.fields){E=t.fields.fields;for(var o=0;o<E.length;o+=1){const n=Pt(t,E,o);C[o]?C[o].p(e,n):(C[o]=Kt(n),C[o].c(),C[o].m(w,null))}for(;o<C.length;o+=1)C[o].d(1);C.length=E.length}e.mode&&A!==(A="add"===t.mode?"Add":"Edit")&&k(N,A),e.mode&&R!==(R="btn "+("add"===t.mode?"btn-success":"btn-info")+" w-100")&&(O.className=R),e.mode&&I!==(I=`modal-${t.mode}-btn`)&&(O.id=I),e.mode&&D!==(D=`${t.mode}-modal`)&&(n.id=D)},i:e,o:e,d(e){e&&f(n),m(C,e),M()}}}function Vt(e,t,n){let{getToken:o,table:a,table_title:l,fields:r,isOpen:i,setIsOpen:s,onAdd:d,onEdit:c,mode:u}=t;var p;function g(){s(!1),window.$(`#${u}-modal`).modal("hide")}return p=(()=>{n("fields",r),console.log("Hey before")}),O().$$.before_render.push(p),e.$set=(e=>{"getToken"in e&&n("getToken",o=e.getToken),"table"in e&&n("table",a=e.table),"table_title"in e&&n("table_title",l=e.table_title),"fields"in e&&n("fields",r=e.fields),"isOpen"in e&&n("isOpen",i=e.isOpen),"setIsOpen"in e&&n("setIsOpen",s=e.setIsOpen),"onAdd"in e&&n("onAdd",d=e.onAdd),"onEdit"in e&&n("onEdit",c=e.onEdit),"mode"in e&&n("mode",u=e.mode)}),e.$$.update=((e={isOpen:1,setIsOpen:1})=>{(e.isOpen||e.setIsOpen)&&i&&(s(!0),window.$(`#${u}-modal`).modal("show"),s(!1))}),{getToken:o,table:a,table_title:l,fields:r,isOpen:i,setIsOpen:s,onAdd:d,onEdit:c,mode:u,handleSubmit:function(e){"add"===u?function(){console.log(`Attempting to add ${a}`);let e={ID:null};for(let t=0;t<r.fields.length;t++)e[r.fields[t].field]=r.fields[t].value;console.log(e),ct.post(`/api/insert/${a}`,e,{headers:{Authorization:o()}}).then(e=>{console.log(`Successfully added ${l}`),d(),g()}).catch(e=>{console.log(e.response)})}():"edit"===u&&function(){console.log(`Attempting to add ${a}`);let e={ID:r.ID};for(let t=0;t<r.fields.length;t++)e[r.fields[t].field]=r.fields[t].value;console.log(e),ct.put(`/api/edit/${a}`,e,{headers:{Authorization:o()}}).then(e=>{console.log(`Successfully edited ${l}`),c(),g()}).catch(e=>{console.log(e.response)})}()},change_handler:function({field:e},t){e.value=t.target.value,n("field",e)},change_handler_1:function({field:e},t){e.value=t.target.value,n("field",e)},change_handler_2:function({field:e},t){e.value=t.target.value,n("field",e)}}}class Xt extends V{constructor(e){super(),G(this,e,Vt,Gt,r,["getToken","table","table_title","fields","isOpen","setIsOpen","onAdd","onEdit","mode"])}}function Jt(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I=e.confirm_del?"Are you sure?":"Delete",D=new Xt({props:{mode:"add",getToken:e.getToken,table:"countries",table_title:"Countries",fields:e.add_modal_fields,isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen,onAdd:e.getCountries}}),M=new Xt({props:{mode:"edit",getToken:e.getToken,table:"countries",table_title:"Countries",fields:e.edit_modal_fields,isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen,onEdit:e.getCountries}}),j=new Ct({props:{table_headers:e.table_headers,data:e.countries,toggleRowSelect:e.toggleRowSelect,selectedRows:e.selectedRows}});return{c(){D.$$.fragment.c(),t=_(),M.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Countries</span>',i=_(),s=h("span"),(d=h("button")).textContent="Add +",c=_(),u=h("button"),m=b("Edit"),y=_(),w=h("button"),x=b(I),O=_(),j.$$.fragment.c(),r.className="mb-3 text-dark",d.className="btn btn-success mb-2",u.className=v=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",u.id="edit-btn",w.className=T=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,w.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",R=[$(d,"click",e.handleAddButtonClick),$(u,"click",e.handleEditButtonClick),$(w,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(D,e,a),g(e,t,a),F(M,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(s,c),p(s,u),p(u,m),p(s,y),p(s,w),p(w,x),p(l,O),F(j,l,null),N=!0},p(e,t){var n={};e.getToken&&(n.getToken=t.getToken),e.add_modal_fields&&(n.fields=t.add_modal_fields),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),e.getCountries&&(n.onAdd=t.getCountries),D.$set(n);var o={};e.getToken&&(o.getToken=t.getToken),e.edit_modal_fields&&(o.fields=t.edit_modal_fields),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),e.getCountries&&(o.onEdit=t.getCountries),M.$set(o),N&&!e.selectedRows||v===(v=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(u.className=v),N&&!e.confirm_del||I===(I=t.confirm_del?"Are you sure?":"Delete")||k(x,I),N&&!e.selectedRows||T===(T=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(w.className=T);var a={};e.table_headers&&(a.table_headers=t.table_headers),e.countries&&(a.data=t.countries),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selectedRows&&(a.selectedRows=t.selectedRows),j.$set(a)},i(e){N||(D.$$.fragment.i(e),M.$$.fragment.i(e),j.$$.fragment.i(e),N=!0)},o(e){D.$$.fragment.o(e),M.$$.fragment.o(e),j.$$.fragment.o(e),N=!1},d(e){D.$destroy(e),e&&f(t),M.$destroy(e),e&&(f(n),f(o)),j.$destroy(),a(R)}}}function Yt(e){var t,n,o=e.is_logged_in&&Jt(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=Jt(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}function Qt(e,t,n){let{is_logged_in:o,getToken:a}=t,l=[],r=[],i=!1,s=!1,d=!1,c={ID:null,fields:[{field:"country",type:"text",display:"Country",placeholder:"eg. Portugal",value:""}]};function u(){console.log("Trying to fetch countries"),ct.get("/api/get/countries",{headers:{Authorization:a()}}).then(function(e){n("countries",l=e.data),console.log(e.data)})}function p(e){n("isAddModalOpen",s=e)}function g(e){n("isEditModalOpen",d=e)}return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"getToken"in e&&n("getToken",a=e.getToken)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&o&&u()}),{is_logged_in:o,getToken:a,countries:l,table_headers:[{columnName:"#",key:"ID"},{columnName:"Country",key:"country"}],selectedRows:r,confirm_del:i,isAddModalOpen:s,isEditModalOpen:d,add_modal_fields:{fields:[{field:"country",type:"text",display:"Country",placeholder:"eg. Portugal",value:""}]},edit_modal_fields:c,toggleRowSelect:function(e){let t=r.indexOf(e);-1===t?n("selectedRows",r=[...r,e]):(r.splice(t,1),n("selectedRows",r)),console.log(r)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)?console.log("Hello there General Kenobi"):(n("confirm_del",i=!1),n("selectedRows",r=[]))},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(i?r.length>0&&ct.delete("/api/delete/countries",{data:{rows:r},headers:{Authorization:a()}}).then(e=>{n("confirm_del",i=!1),u()}).catch(e=>{console.log(e.response)}):n("confirm_del",i=!0))},getCountries:u,setIsAddModalOpen:p,setIsEditModalOpen:g,handleAddButtonClick:function(){p(!0)},handleEditButtonClick:function(){if(1===r.length){for(let e=0;e<l.length;e++)if(l[e].ID===r[0]){c.ID=r[0],n("edit_modal_fields",c);for(let t=0;t<c.fields.length;t++)c.fields[t].value=l[e][c.fields[t].field],n("edit_modal_fields",c)}g(!0)}}}}class Wt extends V{constructor(e){super(),G(this,e,Qt,Yt,r,["is_logged_in","getToken"])}}function Zt(e,t,n){const o=Object.create(e);return o.project=t[n],o.i=n,o}function en(e){var t;return{c(){(t=h("i")).className="fas fa-school fa-fw cursor-pointer mr-1 text-light"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function tn(e){var t;return{c(){(t=h("i")).className="fas fa-plane fa-fw cursor-pointer ml-1 text-light"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function nn(e){var t,n,o,l,r,i,s,d,c,u,m,v,w,x,T,O,N,R,I,D,M,j,A,E,C,S,P,L=e.project.ID,B=e.project.projectCode,H=e.project.name;function z(...t){return e.change_handler(e,...t)}var q=new Oe({props:{to:`/backoffice/project_partners/${e.project.ID}`,$$slots:{default:[en]},$$scope:{ctx:e}}}),U=new Oe({props:{to:`/backoffice/mobilities/${e.project.ID}`,$$slots:{default:[tn]},$$scope:{ctx:e}}});function K(...t){return e.click_handler(e,...t)}return{c(){t=h("tr"),n=h("td"),o=b(L),l=_(),r=h("td"),i=b(B),s=_(),d=h("td"),c=b(H),u=_(),m=h("td"),v=h("input"),T=_(),O=h("label"),N=h("img"),M=_(),j=h("td"),q.$$.fragment.c(),A=_(),U.$$.fragment.c(),E=_(),y(v,"type","file"),v.className="d-none",v.name=w=e.project.ID,v.id=x=`image-input-${e.project.ID}`,N.src=R=`/imgs/projects/${e.project.ID}.png`,N.id=I=`image-${e.project.ID}`,N.height="50",N.alt="Project Logo",O.htmlFor=D=`image-input-${e.project.ID}`,O.className="project-logo cursor-pointer m-0 svelte-126gmv9",m.className="text-center",j.className="text-center vertical-align-middle",t.className=C=-1===e.selectedRows.indexOf(e.project.ID)?"table-row":"table-row bg-secondary",P=[$(v,"change",z),$(t,"click",K)]},m(e,a){g(e,t,a),p(t,n),p(n,o),p(t,l),p(t,r),p(r,i),p(t,s),p(t,d),p(d,c),p(t,u),p(t,m),p(m,v),p(m,T),p(m,O),p(O,N),p(t,M),p(t,j),F(q,j,null),p(j,A),F(U,j,null),p(t,E),S=!0},p(n,a){e=a,S&&!n.projects||L===(L=e.project.ID)||k(o,L),S&&!n.projects||B===(B=e.project.projectCode)||k(i,B),S&&!n.projects||H===(H=e.project.name)||k(c,H),S&&!n.projects||w===(w=e.project.ID)||(v.name=w),S&&!n.projects||x===(x=`image-input-${e.project.ID}`)||(v.id=x),S&&!n.projects||R===(R=`/imgs/projects/${e.project.ID}.png`)||(N.src=R),S&&!n.projects||I===(I=`image-${e.project.ID}`)||(N.id=I),S&&!n.projects||D===(D=`image-input-${e.project.ID}`)||(O.htmlFor=D);var l={};n.projects&&(l.to=`/backoffice/project_partners/${e.project.ID}`),n.$$scope&&(l.$$scope={changed:n,ctx:e}),q.$set(l);var r={};n.projects&&(r.to=`/backoffice/mobilities/${e.project.ID}`),n.$$scope&&(r.$$scope={changed:n,ctx:e}),U.$set(r),S&&!n.selectedRows&&!n.projects||C===(C=-1===e.selectedRows.indexOf(e.project.ID)?"table-row":"table-row bg-secondary")||(t.className=C)},i(e){S||(q.$$.fragment.i(e),U.$$.fragment.i(e),S=!0)},o(e){q.$$.fragment.o(e),U.$$.fragment.o(e),S=!1},d(e){e&&f(t),q.$destroy(),U.$destroy(),a(P)}}}function on(e){for(var t,n,o,a,l,r,i=e.projects,s=[],d=0;d<i.length;d+=1)s[d]=nn(Zt(e,i,d));function c(e,t,n){s[e]&&(t&&q(()=>{s[e].d(t),s[e]=null}),s[e].o(n))}return{c(){t=h("div"),n=h("table"),(o=h("thead")).innerHTML='<tr class="table-headers"><th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px">#</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px">Project Code</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px">Name</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px text-center"><i class="fas fa-images fa-fw"></i></th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-y-dark-1px text-center">Actions</th></tr>',a=_(),l=h("tbody");for(var e=0;e<s.length;e+=1)s[e].c();n.className="table table-dark table-bordered table-hover nowrap m-0",t.className="table-responsive rounded dark-scroll"},m(e,i){g(e,t,i),p(t,n),p(n,o),p(n,a),p(n,l);for(var d=0;d<s.length;d+=1)s[d].m(l,null);r=!0},p(e,t){if(e.selectedRows||e.projects){i=t.projects;for(var n=0;n<i.length;n+=1){const o=Zt(t,i,n);s[n]?(s[n].p(e,o),s[n].i(1)):(s[n]=nn(o),s[n].c(),s[n].i(1),s[n].m(l,null))}for(H();n<s.length;n+=1)c(n,1,1);z()}},i(e){if(!r){for(var t=0;t<i.length;t+=1)s[t].i();r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)c(e,0,0);r=!1},d(e){e&&f(t),m(s,e)}}}function an(e,t,n){let{projects:o,toggleRowSelect:a,selectedRows:l,updateImage:r}=t;function i(e,t){a(t)}function s(e,t){r(e,t).then(e=>{let n=document.querySelector(`#image-${t}`);n.setAttribute("src",n.getAttribute("src")+"?time="+(new Date).getTime())})}return e.$set=(e=>{"projects"in e&&n("projects",o=e.projects),"toggleRowSelect"in e&&n("toggleRowSelect",a=e.toggleRowSelect),"selectedRows"in e&&n("selectedRows",l=e.selectedRows),"updateImage"in e&&n("updateImage",r=e.updateImage)}),{projects:o,toggleRowSelect:a,selectedRows:l,updateImage:r,handleRowClick:i,handleImageChange:s,change_handler:function({project:e},t){return s(t.target.files[0],e.ID)},click_handler:function({project:e},t){i(0,e.ID)}}}class ln extends V{constructor(e){super(),G(this,e,an,on,r,["projects","toggleRowSelect","selectedRows","updateImage"])}}function rn(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I=e.confirm_del?"Are you sure?":"Delete",D=new Xt({props:{mode:"add",getToken:e.getToken,table:"projects",table_title:"Projects",fields:e.add_modal_fields,isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen,onAdd:e.getProjects}}),M=new Xt({props:{mode:"edit",getToken:e.getToken,table:"projects",table_title:"Projects",fields:e.edit_modal_fields,isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen,onEdit:e.getProjects}}),j=new ln({props:{projects:e.projects,toggleRowSelect:e.toggleRowSelect,selectedRows:e.selectedRows,updateImage:e.updateImage}});return{c(){D.$$.fragment.c(),t=_(),M.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Projects</span>',i=_(),s=h("span"),(d=h("button")).textContent="Add +",c=_(),u=h("button"),m=b("Edit"),y=_(),w=h("button"),x=b(I),O=_(),j.$$.fragment.c(),r.className="mb-3 text-dark",d.className="btn btn-success mb-2",u.className=v=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",u.id="edit-btn",w.className=T=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,w.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",R=[$(d,"click",e.handleAddButtonClick),$(u,"click",e.handleEditButtonClick),$(w,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(D,e,a),g(e,t,a),F(M,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(s,c),p(s,u),p(u,m),p(s,y),p(s,w),p(w,x),p(l,O),F(j,l,null),N=!0},p(e,t){var n={};e.getToken&&(n.getToken=t.getToken),e.add_modal_fields&&(n.fields=t.add_modal_fields),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),e.getProjects&&(n.onAdd=t.getProjects),D.$set(n);var o={};e.getToken&&(o.getToken=t.getToken),e.edit_modal_fields&&(o.fields=t.edit_modal_fields),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),e.getProjects&&(o.onEdit=t.getProjects),M.$set(o),N&&!e.selectedRows||v===(v=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(u.className=v),N&&!e.confirm_del||I===(I=t.confirm_del?"Are you sure?":"Delete")||k(x,I),N&&!e.selectedRows||T===(T=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(w.className=T);var a={};e.projects&&(a.projects=t.projects),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selectedRows&&(a.selectedRows=t.selectedRows),e.updateImage&&(a.updateImage=t.updateImage),j.$set(a)},i(e){N||(D.$$.fragment.i(e),M.$$.fragment.i(e),j.$$.fragment.i(e),N=!0)},o(e){D.$$.fragment.o(e),M.$$.fragment.o(e),j.$$.fragment.o(e),N=!1},d(e){D.$destroy(e),e&&f(t),M.$destroy(e),e&&(f(n),f(o)),j.$destroy(),a(R)}}}function sn(e){var t,n,o=e.is_logged_in&&rn(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=rn(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}function dn(e,t,n){let{is_logged_in:o,getToken:a}=t,l=[],r=[],i=!1,s=!1,d=!1,c={fields:[{field:"projectCode",type:"text",display:"Project Code",placeholder:"eg. KA+ 123456798",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Trails2Education",value:""},{field:"description",type:"textarea",display:"Description",placeholder:"eg. This is a project description",value:""}]},u={ID:null,fields:[{field:"projectCode",type:"text",display:"Project Code",placeholder:"eg. KA+ 123456798",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Trails2Education",value:""},{field:"description",type:"textarea",display:"Description",placeholder:"eg. This is a project description",value:""}]};function p(){console.log("Trying to fetch projects"),ct.get("/api/get/projects",{headers:{Authorization:a()}}).then(function(e){n("projects",l=e.data)})}function g(e){for(let e=0;e<c.fields.length;e++)c.fields[e].value="",n("add_modal_fields",c);n("isAddModalOpen",s=e)}function f(e){n("isEditModalOpen",d=e)}return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"getToken"in e&&n("getToken",a=e.getToken)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&o&&p()}),{is_logged_in:o,getToken:a,projects:l,selectedRows:r,confirm_del:i,isAddModalOpen:s,isEditModalOpen:d,add_modal_fields:c,edit_modal_fields:u,getProjects:p,updateImage:function(e,t){let n=new FormData;return n.append(`${t}`,e),n.append("ID",t),ct.put("/api/edit/project_logo",n,{headers:{Authorization:a()}}).then(function(e){return console.log("Hello"),e}).catch(e=>(console.log(e.response),e))},toggleRowSelect:function(e){let t=r.indexOf(e);-1===t?n("selectedRows",r=[...r,e]):(r.splice(t,1),n("selectedRows",r)),console.log(r)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)?console.log("Hello there General Kenobi"):(n("confirm_del",i=!1),n("selectedRows",r=[]))},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(i?r.length>0&&ct.delete("/api/delete/projects",{data:{rows:r},headers:{Authorization:a()}}).then(e=>{n("confirm_del",i=!1),p()}).catch(e=>{console.log(e.response)}):n("confirm_del",i=!0))},setIsAddModalOpen:g,setIsEditModalOpen:f,handleAddButtonClick:function(){g(!0)},handleEditButtonClick:function(){if(1===r.length){for(let e=0;e<l.length;e++)if(l[e].ID===r[0]){u.ID=r[0],n("edit_modal_fields",u);for(let t=0;t<u.fields.length;t++)u.fields[t].value=l[e][u.fields[t].field],n("edit_modal_fields",u)}f(!0)}}}}class cn extends V{constructor(e){super(),G(this,e,dn,sn,r,["is_logged_in","getToken"])}}function un(e,t,n){const o=Object.create(e);return o.mobility=t[n],o.i=n,o}function pn(e){var t;return{c(){(t=h("i")).className="fas fa-chalkboard-teacher fa-fw cursor-pointer mr-1 text-light",t.title="Teachers"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function gn(e){var t;return{c(){(t=h("i")).className="fas fa-user-graduate fa-fw cursor-pointer ml-1 text-light",t.title="Students"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function fn(e){var t,n,o,a,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I,D,M=e.mobility.ID,j=e.mobility.origin,A=e.mobility.target,E=e.mobility.departureDate.slice(0,-14),C=e.mobility.arrivalDate.slice(0,-14),S=new Oe({props:{to:`/backoffice/mobility_teachers/${e.mobility.ID}`,$$slots:{default:[pn]},$$scope:{ctx:e}}}),P=new Oe({props:{to:`/backoffice/mobility_students/${e.mobility.ID}`,$$slots:{default:[gn]},$$scope:{ctx:e}}});function L(...t){return e.click_handler(e,...t)}return{c(){t=h("tr"),n=h("td"),o=b(M),a=_(),l=h("td"),r=b(j),i=_(),s=h("td"),d=b(A),c=_(),u=h("td"),m=b(E),v=_(),y=h("td"),w=b(C),x=_(),T=h("td"),S.$$.fragment.c(),O=_(),P.$$.fragment.c(),N=_(),T.className="text-center vertical-align-middle",t.className=R=-1===e.selectedRows.indexOf(e.mobility.ID)?"table-row":"table-row bg-secondary",D=$(t,"click",L)},m(e,f){g(e,t,f),p(t,n),p(n,o),p(t,a),p(t,l),p(l,r),p(t,i),p(t,s),p(s,d),p(t,c),p(t,u),p(u,m),p(t,v),p(t,y),p(y,w),p(t,x),p(t,T),F(S,T,null),p(T,O),F(P,T,null),p(t,N),I=!0},p(n,a){e=a,I&&!n.mobilities||M===(M=e.mobility.ID)||k(o,M),I&&!n.mobilities||j===(j=e.mobility.origin)||k(r,j),I&&!n.mobilities||A===(A=e.mobility.target)||k(d,A),I&&!n.mobilities||E===(E=e.mobility.departureDate.slice(0,-14))||k(m,E),I&&!n.mobilities||C===(C=e.mobility.arrivalDate.slice(0,-14))||k(w,C);var l={};n.mobilities&&(l.to=`/backoffice/mobility_teachers/${e.mobility.ID}`),n.$$scope&&(l.$$scope={changed:n,ctx:e}),S.$set(l);var i={};n.mobilities&&(i.to=`/backoffice/mobility_students/${e.mobility.ID}`),n.$$scope&&(i.$$scope={changed:n,ctx:e}),P.$set(i),I&&!n.selectedRows&&!n.mobilities||R===(R=-1===e.selectedRows.indexOf(e.mobility.ID)?"table-row":"table-row bg-secondary")||(t.className=R)},i(e){I||(S.$$.fragment.i(e),P.$$.fragment.i(e),I=!0)},o(e){S.$$.fragment.o(e),P.$$.fragment.o(e),I=!1},d(e){e&&f(t),S.$destroy(),P.$destroy(),D()}}}function mn(e){for(var t,n,o,a,l,r,i=e.mobilities,s=[],d=0;d<i.length;d+=1)s[d]=fn(un(e,i,d));function c(e,t,n){s[e]&&(t&&q(()=>{s[e].d(t),s[e]=null}),s[e].o(n))}return{c(){t=h("div"),n=h("table"),(o=h("thead")).innerHTML='<tr class="table-headers"><th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px">#</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px">Origin</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px">Destination</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px text-center">Departure</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px text-center">Arrival</th>\n\t\t\t                <th scope="col" class="position-sticky border-bottom-0 border-top-0 top-0px bg-darkest shadow-dark-1px text-center">Actions</th></tr>',a=_(),l=h("tbody");for(var e=0;e<s.length;e+=1)s[e].c();n.className="table table-dark table-bordered table-hover nowrap m-0",t.className="table-responsive rounded dark-scroll"},m(e,i){g(e,t,i),p(t,n),p(n,o),p(n,a),p(n,l);for(var d=0;d<s.length;d+=1)s[d].m(l,null);r=!0},p(e,t){if(e.selectedRows||e.mobilities){i=t.mobilities;for(var n=0;n<i.length;n+=1){const o=un(t,i,n);s[n]?(s[n].p(e,o),s[n].i(1)):(s[n]=fn(o),s[n].c(),s[n].i(1),s[n].m(l,null))}for(H();n<s.length;n+=1)c(n,1,1);z()}},i(e){if(!r){for(var t=0;t<i.length;t+=1)s[t].i();r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)c(e,0,0);r=!1},d(e){e&&f(t),m(s,e)}}}function hn(e,t,n){let{mobilities:o,toggleRowSelect:a,selectedRows:l}=t;function r(e,t){a(t)}return e.$set=(e=>{"mobilities"in e&&n("mobilities",o=e.mobilities),"toggleRowSelect"in e&&n("toggleRowSelect",a=e.toggleRowSelect),"selectedRows"in e&&n("selectedRows",l=e.selectedRows)}),{mobilities:o,toggleRowSelect:a,selectedRows:l,handleRowClick:r,click_handler:function({mobility:e},t){r(0,e.ID)}}}class bn extends V{constructor(e){super(),G(this,e,hn,mn,r,["mobilities","toggleRowSelect","selectedRows"])}}function _n(e,t,n){const o=Object.create(e);return o.partner=t[n],o.i=n,o}function vn(e,t,n){const o=Object.create(e);return o.partner=t[n],o.i=n,o}function $n(e){var t;return{c(){(t=h("option")).textContent="Select Partner",t.__value="0",t.value=t.__value,t.disabled=!0,t.selected=!0,t.className="d-none"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function yn(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function wn(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value,t.selected=!0},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function kn(e){var t;function n(e){return e.originPartner===e.partner.ID?wn:yn}var o=n(e),a=o(e);return{c(){a.c(),t=v()},m(e,n){a.m(e,n),g(e,t,n)},p(e,l){o===(o=n(l))&&a?a.p(e,l):(a.d(1),(a=o(l))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&f(t)}}}function xn(e){var t;return{c(){(t=h("option")).textContent="Select Partner",t.__value="0",t.value=t.__value,t.disabled=!0,t.selected=!0,t.className="d-none"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function Tn(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function On(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value,t.selected=!0},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Nn(e){var t;function n(e){return e.targetPartner===e.partner.ID?On:Tn}var o=n(e),a=o(e);return{c(){a.c(),t=v()},m(e,n){a.m(e,n),g(e,t,n)},p(e,l){o===(o=n(l))&&a?a.p(e,l):(a.d(1),(a=o(l))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&f(t)}}}function Rn(t){for(var n,o,l,r,i,s,d,c,u,b,w,k,x,T,O,N,R,I,D,M,j,A,E,C,S,P,L,B,H,z,q,U,F,K,G,V,X,J,Y,Q,W,Z,ee,te,ne,oe,ae,le,re=0===t.originPartner&&$n(),ie=t.partners,se=[],de=0;de<ie.length;de+=1)se[de]=kn(vn(t,ie,de));var ce=0===t.originPartner&&xn(),ue=t.partners,pe=[];for(de=0;de<ue.length;de+=1)pe[de]=Nn(_n(t,ue,de));return{c(){n=h("div"),o=h("div"),l=h("div"),(r=h("div")).innerHTML='<h5 class="modal-title">Add Mobility</h5>\n\t\t\t                <button class="close" type="button" data-dismiss="modal"><span>x</span></button>',i=_(),s=h("div"),d=h("div"),c=h("div"),(u=h("div")).innerHTML='<div class="input-group-text w-100">Origin</div>',b=_(),w=h("input"),k=_(),x=h("div"),T=h("div"),(O=h("div")).innerHTML='<div class="input-group-text w-100">Origin Partner</div>',N=_(),R=h("select"),re&&re.c(),I=v();for(var e=0;e<se.length;e+=1)se[e].c();D=_(),M=h("div"),j=h("div"),(A=h("div")).innerHTML='<div class="input-group-text w-100">Target</div>',E=_(),C=h("input"),S=_(),P=h("div"),L=h("div"),(B=h("div")).innerHTML='<div class="input-group-text w-100">Target Partner</div>',H=_(),z=h("select"),ce&&ce.c(),q=v();for(e=0;e<pe.length;e+=1)pe[e].c();U=_(),F=h("div"),K=h("div"),(G=h("div")).innerHTML='<div class="input-group-text w-100">Departure</div>',V=_(),X=h("input"),J=_(),Y=h("div"),Q=h("div"),(W=h("div")).innerHTML='<div class="input-group-text w-100">Arrival</div>',Z=_(),ee=h("input"),ne=_(),oe=h("div"),(ae=h("button")).textContent="Add",r.className="modal-header",u.className="input-group-prepend w-25",w.className="form-control",y(w,"type","text"),w.value=t.origin,w.placeholder="eg. Sweden, Stockholm",c.className="input-group",d.className="form-group",O.className="input-group-prepend w-25",R.className="form-control",T.className="input-group",x.className="form-group",A.className="input-group-prepend w-25",C.className="form-control",y(C,"type","text"),C.value=t.target,C.placeholder="eg. Sweden, Stockholm",j.className="input-group",M.className="form-group",B.className="input-group-prepend w-25",z.className="form-control",L.className="input-group",P.className="form-group",G.className="input-group-prepend w-25",y(X,"type","date"),X.className="form-control",X.value=t.departureDate,K.className="input-group",F.className="form-group",W.className="input-group-prepend w-25",y(ee,"type","date"),ee.className="form-control",ee.value=t.arrivalDate,Q.className="input-group",Y.className=te=`form-group ${null!=t.projectID?"mb-0":""}`,s.className="modal-body",ae.className="btn btn-success w-100",ae.id="modal-add-btn",oe.className="modal-footer",l.className="modal-content",o.className="modal-dialog",y(o,"role","document"),n.className="modal fade",n.id="add-modal",n.tabIndex="-1",le=[$(w,"change",t.change_handler),$(R,"change",t.change_handler_1),$(C,"change",t.change_handler_2),$(z,"change",t.change_handler_3),$(X,"change",t.change_handler_4),$(ee,"change",t.change_handler_5),$(ae,"click",t.addMobility)]},m(e,t){g(e,n,t),p(n,o),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(c,u),p(c,b),p(c,w),p(s,k),p(s,x),p(x,T),p(T,O),p(T,N),p(T,R),re&&re.m(R,null),p(R,I);for(var a=0;a<se.length;a+=1)se[a].m(R,null);p(s,D),p(s,M),p(M,j),p(j,A),p(j,E),p(j,C),p(s,S),p(s,P),p(P,L),p(L,B),p(L,H),p(L,z),ce&&ce.m(z,null),p(z,q);for(a=0;a<pe.length;a+=1)pe[a].m(z,null);p(s,U),p(s,F),p(F,K),p(K,G),p(K,V),p(K,X),p(s,J),p(s,Y),p(Y,Q),p(Q,W),p(Q,Z),p(Q,ee),p(l,ne),p(l,oe),p(oe,ae)},p(e,t){if(e.origin&&(w.value=t.origin),0===t.originPartner?re||((re=$n()).c(),re.m(R,I)):re&&(re.d(1),re=null),e.originPartner||e.partners){ie=t.partners;for(var n=0;n<ie.length;n+=1){const o=vn(t,ie,n);se[n]?se[n].p(e,o):(se[n]=kn(o),se[n].c(),se[n].m(R,null))}for(;n<se.length;n+=1)se[n].d(1);se.length=ie.length}if(e.target&&(C.value=t.target),0===t.originPartner?ce||((ce=xn()).c(),ce.m(z,q)):ce&&(ce.d(1),ce=null),e.targetPartner||e.partners){ue=t.partners;for(n=0;n<ue.length;n+=1){const o=_n(t,ue,n);pe[n]?pe[n].p(e,o):(pe[n]=Nn(o),pe[n].c(),pe[n].m(z,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ue.length}e.departureDate&&(X.value=t.departureDate),e.arrivalDate&&(ee.value=t.arrivalDate),e.projectID&&te!==(te=`form-group ${null!=t.projectID?"mb-0":""}`)&&(Y.className=te)},i:e,o:e,d(e){e&&f(n),re&&re.d(),m(se,e),ce&&ce.d(),m(pe,e),a(le)}}}function In(e,t,n){let{getMobilities:o,partners:a,getToken:l,projectID:r,isOpen:i,setIsOpen:s}=t,d=[],c="",u=0,p="",g=0,f="",m="",h=0;return console.log(r),e.$set=(e=>{"getMobilities"in e&&n("getMobilities",o=e.getMobilities),"partners"in e&&n("partners",a=e.partners),"getToken"in e&&n("getToken",l=e.getToken),"projectID"in e&&n("projectID",r=e.projectID),"isOpen"in e&&n("isOpen",i=e.isOpen),"setIsOpen"in e&&n("setIsOpen",s=e.setIsOpen)}),e.$$.update=((e={isOpen:1,projectID:1,setIsOpen:1})=>{(e.isOpen||e.projectID||e.setIsOpen)&&i&&(null==r&&(console.log("Attempting to fetch projects"),ct.get("/api/get/projects",{headers:{Authorization:l()}}).then(e=>{d=e.data,console.log("Successfully fetched projects")}).catch(e=>{console.log("There was an error fetching the projects"),console.log(e.response)})),n("origin",c=""),n("originPartner",u=0),n("target",p=""),n("targetPartner",g=0),n("departureDate",f=""),n("arrivalDate",m=""),h=0,s(!0),window.$("#add-modal").modal("show"),s(!1))}),{getMobilities:o,partners:a,getToken:l,projectID:r,isOpen:i,setIsOpen:s,origin:c,originPartner:u,target:p,targetPartner:g,departureDate:f,arrivalDate:m,addMobility:function(){console.log("Attempting to add mobility");let e={ID:null,origin:c,IDOriginPartner:u,target:p,IDTargetPartner:g,departureDate:f,arrivalDate:m,IDProject:null!=r?r:h};console.log(e),ct.post("/api/insert/mobilities",e,{headers:{Authorization:l()}}).then(e=>{console.log("Successfully added mobility"),o()}).catch(e=>{console.log(e.response)})},change_handler:function(e){const t=c=e.target.value;return n("origin",c),t},change_handler_1:function(e){const t=u=e.target.value;return n("originPartner",u),t},change_handler_2:function(e){const t=p=e.target.value;return n("target",p),t},change_handler_3:function(e){const t=g=e.target.value;return n("targetPartner",g),t},change_handler_4:function(e){const t=f=e.target.value;return n("departureDate",f),t},change_handler_5:function(e){const t=m=e.target.value;return n("arrivalDate",m),t}}}class Dn extends V{constructor(e){super(),G(this,e,In,Rn,r,["getMobilities","partners","getToken","projectID","isOpen","setIsOpen"])}}function Mn(e,t,n){const o=Object.create(e);return o.partner=t[n],o.i=n,o}function jn(e,t,n){const o=Object.create(e);return o.partner=t[n],o.i=n,o}function An(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function En(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value,t.selected=!0},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Cn(e){var t;function n(e){return e.partner.ID===e.originPartner?En:An}var o=n(e),a=o(e);return{c(){a.c(),t=v()},m(e,n){a.m(e,n),g(e,t,n)},p(e,l){o===(o=n(l))&&a?a.p(e,l):(a.d(1),(a=o(l))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&f(t)}}}function Sn(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Pn(e){var t,n,o,a=e.partner.name;return{c(){t=h("option"),n=b(a),t.__value=o=e.partner.ID,t.value=t.__value,t.selected=!0},m(e,o){g(e,t,o),p(t,n)},p(e,l){e.partners&&a!==(a=l.partner.name)&&k(n,a),e.partners&&o!==(o=l.partner.ID)&&(t.__value=o),t.value=t.__value},d(e){e&&f(t)}}}function Ln(e){var t;function n(e){return e.partner.ID===e.targetPartner?Pn:Sn}var o=n(e),a=o(e);return{c(){a.c(),t=v()},m(e,n){a.m(e,n),g(e,t,n)},p(e,l){o===(o=n(l))&&a?a.p(e,l):(a.d(1),(a=o(l))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&f(t)}}}function Bn(t){for(var n,o,l,r,i,s,d,c,u,b,v,w,k,x,T,O,N,R,I,D,M,j,A,E,C,S,P,L,B,H,z,q,U,F,K,G,V,X,J,Y,Q,W,Z,ee,te,ne,oe,ae,le=t.partners,re=[],ie=0;ie<le.length;ie+=1)re[ie]=Cn(jn(t,le,ie));var se=t.partners,de=[];for(ie=0;ie<se.length;ie+=1)de[ie]=Ln(Mn(t,se,ie));return{c(){n=h("div"),o=h("div"),l=h("div"),(r=h("div")).innerHTML='<h5 class="modal-title">Edit Project</h5>\n\t\t\t                <button class="close" type="button" data-dismiss="modal"><span>x</span></button>',i=_(),s=h("div"),d=h("div"),c=h("div"),u=h("div"),(b=h("div")).innerHTML='<div class="input-group-text w-100">Origin</div>',v=_(),w=h("input"),k=_(),x=h("div"),T=h("div"),(O=h("div")).innerHTML='<div class="input-group-text w-100">Origin Partner</div>',N=_(),R=h("select");for(var e=0;e<re.length;e+=1)re[e].c();I=_(),D=h("div"),M=h("div"),(j=h("div")).innerHTML='<div class="input-group-text w-100">Target</div>',A=_(),E=h("input"),C=_(),S=h("div"),P=h("div"),(L=h("div")).innerHTML='<div class="input-group-text w-100">Target Partner</div>',B=_(),H=h("select");for(e=0;e<de.length;e+=1)de[e].c();z=_(),q=h("div"),U=h("div"),(F=h("div")).innerHTML='<div class="input-group-text w-100">Departure</div>',K=_(),G=h("input"),X=_(),J=h("div"),Y=h("div"),(Q=h("div")).innerHTML='<div class="input-group-text w-100">Arrival</div>',W=_(),Z=h("input"),te=_(),ne=h("div"),(oe=h("button")).textContent="Edit",r.className="modal-header",b.className="input-group-prepend w-25",w.className="form-control",y(w,"type","text"),w.value=t.origin,w.placeholder="eg. Sweden, Stockholm",u.className="input-group",c.className="form-group",O.className="input-group-prepend w-25",R.className="form-control",T.className="input-group",x.className="form-group",j.className="input-group-prepend w-25",E.className="form-control",y(E,"type","text"),E.value=t.target,E.placeholder="eg. Sweden, Stockholm",M.className="input-group",D.className="form-group",L.className="input-group-prepend w-25",H.className="form-control",P.className="input-group",S.className="form-group",F.className="input-group-prepend w-25",y(G,"type","date"),G.value=V=t.departureDate.slice(0,-14),G.className="form-control",U.className="input-group",q.className="form-group",Q.className="input-group-prepend w-25",y(Z,"type","date"),Z.value=ee=t.arrivalDate.slice(0,-14),Z.className="form-control",Y.className="input-group",J.className="form-group mb-0",d.className="modal-body",s.className="modal-body",oe.className="btn btn-info w-100",ne.className="modal-footer",l.className="modal-content",o.className="modal-dialog",y(o,"role","document"),n.className="modal fade",n.id="edit-modal",n.tabIndex="-1",ae=[$(w,"change",t.change_handler),$(R,"change",t.change_handler_1),$(E,"change",t.change_handler_2),$(H,"change",t.change_handler_3),$(G,"change",t.change_handler_4),$(Z,"change",t.change_handler_5),$(oe,"click",t.editMobility)]},m(e,t){g(e,n,t),p(n,o),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(c,u),p(u,b),p(u,v),p(u,w),p(d,k),p(d,x),p(x,T),p(T,O),p(T,N),p(T,R);for(var a=0;a<re.length;a+=1)re[a].m(R,null);p(d,I),p(d,D),p(D,M),p(M,j),p(M,A),p(M,E),p(d,C),p(d,S),p(S,P),p(P,L),p(P,B),p(P,H);for(a=0;a<de.length;a+=1)de[a].m(H,null);p(d,z),p(d,q),p(q,U),p(U,F),p(U,K),p(U,G),p(d,X),p(d,J),p(J,Y),p(Y,Q),p(Y,W),p(Y,Z),p(l,te),p(l,ne),p(ne,oe)},p(e,t){if(e.origin&&(w.value=t.origin),e.partners||e.originPartner){le=t.partners;for(var n=0;n<le.length;n+=1){const o=jn(t,le,n);re[n]?re[n].p(e,o):(re[n]=Cn(o),re[n].c(),re[n].m(R,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=le.length}if(e.target&&(E.value=t.target),e.partners||e.targetPartner){se=t.partners;for(n=0;n<se.length;n+=1){const o=Mn(t,se,n);de[n]?de[n].p(e,o):(de[n]=Ln(o),de[n].c(),de[n].m(H,null))}for(;n<de.length;n+=1)de[n].d(1);de.length=se.length}e.departureDate&&V!==(V=t.departureDate.slice(0,-14))&&(G.value=V),e.arrivalDate&&ee!==(ee=t.arrivalDate.slice(0,-14))&&(Z.value=ee)},i:e,o:e,d(e){e&&f(n),m(re,e),m(de,e),a(ae)}}}function Hn(e,t,n){let{getMobilities:o,getToken:a,mobilities:l,partners:r,selectedRows:i,isOpen:s,setIsOpen:d}=t,c=0,u="",p=0,g="",f=0,m="",h="";return e.$set=(e=>{"getMobilities"in e&&n("getMobilities",o=e.getMobilities),"getToken"in e&&n("getToken",a=e.getToken),"mobilities"in e&&n("mobilities",l=e.mobilities),"partners"in e&&n("partners",r=e.partners),"selectedRows"in e&&n("selectedRows",i=e.selectedRows),"isOpen"in e&&n("isOpen",s=e.isOpen),"setIsOpen"in e&&n("setIsOpen",d=e.setIsOpen)}),e.$$.update=((e={isOpen:1,mobilities:1,selectedRows:1,departureDate:1,arrivalDate:1,setIsOpen:1})=>{if((e.isOpen||e.mobilities||e.selectedRows||e.departureDate||e.arrivalDate||e.setIsOpen)&&s){d(!0),window.$("#edit-modal").modal("show"),console.log(l),console.log(i);for(let e=0;e<l.length;e++)l[e].ID===i[0]&&(c=i[0],n("origin",u=l[e].origin),n("originPartner",p=l[e].IDOriginPartner),n("target",g=l[e].target),n("targetPartner",f=l[e].IDTargetPartner),n("departureDate",m=l[e].departureDate),n("arrivalDate",h=l[e].arrivalDate),console.log("Hey"),console.log(m),console.log(h));d(!1)}}),{getMobilities:o,getToken:a,mobilities:l,partners:r,selectedRows:i,isOpen:s,setIsOpen:d,origin:u,originPartner:p,target:g,targetPartner:f,departureDate:m,arrivalDate:h,editMobility:function(){let e={ID:c,origin:u,IDOriginPartner:p,target:g,IDTargetPartner:f,departureDate:m,arrivalDate:h};console.log(e),console.log("Trying to edit mobilities"),ct.put("/api/edit/mobilities",e,{headers:{Authorization:a()}}).then(e=>{console.log("Successfully edited mobility"),o(),d(!1),window.$("#edit-modal").modal("hide")}).catch(e=>{console.log("There was an error editing the project")})},change_handler:function(e){const t=u=e.target.value;return n("origin",u),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("departureDate",m),n("arrivalDate",h),n("setIsOpen",d),t},change_handler_1:function(e){const t=p=e.target.value;return n("originPartner",p),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("departureDate",m),n("arrivalDate",h),n("setIsOpen",d),t},change_handler_2:function(e){const t=g=e.target.value;return n("target",g),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("departureDate",m),n("arrivalDate",h),n("setIsOpen",d),t},change_handler_3:function(e){const t=f=e.target.value;return n("targetPartner",f),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("departureDate",m),n("arrivalDate",h),n("setIsOpen",d),t},change_handler_4:function(e){const t=m=e.target.value;return n("departureDate",m),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("arrivalDate",h),n("setIsOpen",d),t},change_handler_5:function(e){const t=h=e.target.value;return n("arrivalDate",h),n("isOpen",s),n("mobilities",l),n("selectedRows",i),n("departureDate",m),n("setIsOpen",d),t}}}class zn extends V{constructor(e){super(),G(this,e,Hn,Bn,r,["getMobilities","getToken","mobilities","partners","selectedRows","isOpen","setIsOpen"])}}function qn(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I=e.confirm_del?"Are you sure?":"Delete",D=new Dn({props:{getMobilities:e.getMobilities,partners:e.partners,getToken:e.getToken,projectID:e.id,isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen}}),M=new zn({props:{getMobilities:e.getMobilities,mobilities:e.mobilities,partners:e.partners,getToken:e.getToken,selectedRows:e.selectedRows,isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen}}),j=new bn({props:{mobilities:e.mobilities,toggleRowSelect:e.toggleRowSelect,selectedRows:e.selectedRows}});return{c(){D.$$.fragment.c(),t=_(),M.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Mobilities</span>',i=_(),s=h("span"),(d=h("button")).textContent="Add +",c=_(),u=h("button"),m=b("Edit"),y=_(),w=h("button"),x=b(I),O=_(),j.$$.fragment.c(),r.className="mb-3 text-dark",d.className="btn btn-success mb-2",u.className=v=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",u.id="edit-btn",w.className=T=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,w.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",R=[$(d,"click",e.handleAddButtonClick),$(u,"click",e.handleEditButtonClick),$(w,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(D,e,a),g(e,t,a),F(M,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(s,c),p(s,u),p(u,m),p(s,y),p(s,w),p(w,x),p(l,O),F(j,l,null),N=!0},p(e,t){var n={};e.getMobilities&&(n.getMobilities=t.getMobilities),e.partners&&(n.partners=t.partners),e.getToken&&(n.getToken=t.getToken),e.id&&(n.projectID=t.id),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),D.$set(n);var o={};e.getMobilities&&(o.getMobilities=t.getMobilities),e.mobilities&&(o.mobilities=t.mobilities),e.partners&&(o.partners=t.partners),e.getToken&&(o.getToken=t.getToken),e.selectedRows&&(o.selectedRows=t.selectedRows),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),M.$set(o),N&&!e.selectedRows||v===(v=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(u.className=v),N&&!e.confirm_del||I===(I=t.confirm_del?"Are you sure?":"Delete")||k(x,I),N&&!e.selectedRows||T===(T=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(w.className=T);var a={};e.mobilities&&(a.mobilities=t.mobilities),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selectedRows&&(a.selectedRows=t.selectedRows),j.$set(a)},i(e){N||(D.$$.fragment.i(e),M.$$.fragment.i(e),j.$$.fragment.i(e),N=!0)},o(e){D.$$.fragment.o(e),M.$$.fragment.o(e),j.$$.fragment.o(e),N=!1},d(e){D.$destroy(e),e&&f(t),M.$destroy(e),e&&(f(n),f(o)),j.$destroy(),a(R)}}}function Un(e){var t,n,o=e.is_logged_in&&qn(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=qn(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}function Fn(e,t,n){let{id:o,is_logged_in:a,getToken:l}=t,r=[],i=[],s=[],d=!1,c=!1,u=!1;function p(e){n("isAddModalOpen",c=e)}function g(e){n("isEditModalOpen",u=e)}function f(){console.log("Attempting to fetch mobilities"),ct.get(`/api/get/mobilities${null!=o?`?IDProject=${o}`:""}`,{headers:{Authorization:l()}}).then(function(e){n("mobilities",r=e.data),console.log("Mobilities fetched successfully")}).catch(e=>{console.log("There was an error fetching the mobilities"),console.log(e.response)})}function m(){console.log("Attempting to fetch partners"),ct.get("/api/get/partners",{headers:{Authorization:l()}}).then(e=>{n("partners",i=e.data),console.log("Successfully fetched partners")}).catch(e=>{console.log("There was an error fetching the partners"),console.log(e.response)})}return e.$set=(e=>{"id"in e&&n("id",o=e.id),"is_logged_in"in e&&n("is_logged_in",a=e.is_logged_in),"getToken"in e&&n("getToken",l=e.getToken)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&a&&f()}),{id:o,is_logged_in:a,getToken:l,mobilities:r,partners:i,selectedRows:s,confirm_del:d,isAddModalOpen:c,isEditModalOpen:u,toggleRowSelect:function(e){let t=s.indexOf(e);-1===t?n("selectedRows",s=[...s,e]):(s.splice(t,1),n("selectedRows",s)),console.log(s)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)||(n("confirm_del",d=!1),n("selectedRows",s=[]))},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(d?s.length>0&&ct.delete("/api/delete/mobilities",{data:{rows:s},headers:{Authorization:l()}}).then(e=>{n("confirm_del",d=!1),n("selectedRows",s=[]),f()}).catch(e=>{console.log(e.response)}):n("confirm_del",d=!0))},setIsAddModalOpen:p,setIsEditModalOpen:g,getMobilities:f,handleAddButtonClick:function(){0===i.length&&m(),p(!0)},handleEditButtonClick:function(){1===s.length&&(0===i.length&&m(),g(!0))}}}class Kn extends V{constructor(e){super(),G(this,e,Fn,Un,r,["id","is_logged_in","getToken"])}}function Gn(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I,D,M,j,A=e.confirm_del?"Are you sure?":"Delete",E=new Xt({props:{mode:"add",getToken:e.getToken,table:"students",fields:e.add_modal_fields,table_title:"Students",isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen,onAdd:e.getMobilityStudents}}),C=new Xt({props:{mode:"edit",getToken:e.getToken,table:"students",fields:e.edit_modal_fields,table_title:"Students",isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen,onEdit:e.getMobilityStudents}}),S=new Ct({props:{getToken:e.getToken,table:"mobilities_students",table_headers:e.table_headers,data:e.mobility_students,toggle_fields:e.toggle_fields,onToggle:e.getMobilityStudents,selectedRows:e.selectedRows,toggleRowSelect:e.toggleRowSelect,selection_field:Xn}});return{c(){E.$$.fragment.c(),t=_(),C.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Mobility Students</span>',i=_(),s=h("h3"),d=h("span"),c=b(e.mobility),u=_(),m=h("span"),(v=h("button")).textContent="Add +",y=_(),w=h("button"),x=b("Edit"),O=_(),N=h("button"),R=b(A),D=_(),S.$$.fragment.c(),r.className="mb-3 text-dark",d.className="border-bottom-3px border-top-3px border-dark px-2 d-inline-block",s.className="mb-3 text-dark",v.className="btn btn-success mb-2",w.className=T=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",w.id="edit-btn",N.className=I=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,N.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",j=[$(v,"click",e.handleAddButtonClick),$(w,"click",e.handleEditButtonClick),$(N,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(E,e,a),g(e,t,a),F(C,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(l,u),p(l,m),p(m,v),p(m,y),p(m,w),p(w,x),p(m,O),p(m,N),p(N,R),p(l,D),F(S,l,null),M=!0},p(e,t){var n={};e.getToken&&(n.getToken=t.getToken),e.add_modal_fields&&(n.fields=t.add_modal_fields),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),e.getMobilityStudents&&(n.onAdd=t.getMobilityStudents),E.$set(n);var o={};e.getToken&&(o.getToken=t.getToken),e.edit_modal_fields&&(o.fields=t.edit_modal_fields),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),e.getMobilityStudents&&(o.onEdit=t.getMobilityStudents),C.$set(o),M&&!e.mobility||k(c,t.mobility),M&&!e.selectedRows||T===(T=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(w.className=T),M&&!e.confirm_del||A===(A=t.confirm_del?"Are you sure?":"Delete")||k(R,A),M&&!e.selectedRows||I===(I=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(N.className=I);var a={};e.getToken&&(a.getToken=t.getToken),e.table_headers&&(a.table_headers=t.table_headers),e.mobility_students&&(a.data=t.mobility_students),e.toggle_fields&&(a.toggle_fields=t.toggle_fields),e.getMobilityStudents&&(a.onToggle=t.getMobilityStudents),e.selectedRows&&(a.selectedRows=t.selectedRows),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selection_field&&(a.selection_field=Xn),S.$set(a)},i(e){M||(E.$$.fragment.i(e),C.$$.fragment.i(e),S.$$.fragment.i(e),M=!0)},o(e){E.$$.fragment.o(e),C.$$.fragment.o(e),S.$$.fragment.o(e),M=!1},d(e){E.$destroy(e),e&&f(t),C.$destroy(e),e&&(f(n),f(o)),S.$destroy(),a(j)}}}function Vn(e){var t,n,o=e.is_logged_in&&Gn(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=Gn(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}let Xn="IDStudent";function Jn(e,t,n){let{is_logged_in:o,getToken:a,id:l}=t,r=[],i=[],s=[{display:"Male",value:"Male"},{display:"Female",value:"Female"}],d="",c=!1,u=!1,p=!1,g={fields:[{field:"studentNumber",type:"text",display:"Student #",placeholder:"eg. a701617004",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Vasco Raminhos",value:""},{field:"birthday",type:"date",display:"Birthday",placeholder:"",value:""},{field:"gender",type:"select",display:"Gender",placeholder:"Choose a gender",value:"",options:s},{field:"email",type:"email",display:"Email",placeholder:"eg. student.email@gmail.com",value:""}]},f={ID:null,fields:[{field:"studentNumber",type:"text",display:"Student #",placeholder:"eg. a701617004",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Vasco Raminhos",value:""},{field:"birthday",type:"date",display:"Birthday",placeholder:"",value:""},{field:"gender",type:"select",display:"Gender",placeholder:"Choose a gender",value:"",options:s},{field:"email",type:"email",display:"Email",placeholder:"eg. student.email@gmail.com",value:""}]};function m(){ct.get(`/api/get/mobility_students?IDMobility=${l}`,{headers:{Authorization:a()}}).then(function(e){n("mobility_students",i=e.data);for(let e=0;e<i.length;e++){let t=new Date(new Date-new Date(i[e].birthday)).getFullYear()-1970;isNaN(t)&&(t=0),i[e].age=t,n("mobility_students",i),console.log(t)}n("mobility",d=e.data[0].mobility),console.log(e.data)}).catch(e=>{console.log(e.response)})}function h(e){n("isAddModalOpen",u=e)}function b(e){n("isEditModalOpen",p=e)}return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"getToken"in e&&n("getToken",a=e.getToken),"id"in e&&n("id",l=e.id)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&o&&m()}),{is_logged_in:o,getToken:a,id:l,selectedRows:r,mobility_students:i,mobility:d,table_headers:[{columnName:" ",key:"isParticipating",toggler:!0},{columnName:"Name",key:"name"},{columnName:"Student #",key:"studentNumber"},{columnName:"Age",key:"age"},{columnName:"Gender",key:"gender"},{columnName:"Email",key:"email"}],toggle_fields:[{field:"IDMobility"},{field:"IDStudent"}],confirm_del:c,isAddModalOpen:u,isEditModalOpen:p,add_modal_fields:g,edit_modal_fields:f,getMobilityStudents:m,toggleRowSelect:function(e){let t=r.indexOf(e);-1===t?n("selectedRows",r=[...r,e]):(r.splice(t,1),n("selectedRows",r)),console.log(r)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)?console.log("Hello there General Kenobi"):(n("confirm_del",c=!1),n("selectedRows",r=[]))},setIsAddModalOpen:h,setIsEditModalOpen:b,handleAddButtonClick:function(){for(let e=0;e<g.fields.length;e++)g.fields[e].value="",n("add_modal_fields",g);h(!0)},handleEditButtonClick:function(){if(1===r.length){for(let e=0;e<i.length;e++)if(i[e][Xn]===r[0]){f.ID=r[0],n("edit_modal_fields",f);for(let t=0;t<f.fields.length;t++)"date"===f.fields[t].type?(f.fields[t].value=i[e][f.fields[t].field].slice(0,-14),n("edit_modal_fields",f),console.log(i[e][f.fields[t].field])):(f.fields[t].value=i[e][f.fields[t].field],n("edit_modal_fields",f),console.log(f.fields[t].value))}b(!0)}},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(c?r.length>0&&ct.delete("/api/delete/students",{data:{rows:r},headers:{Authorization:a()}}).then(e=>{n("confirm_del",c=!1),n("selectedRows",r=[]),m()}).catch(e=>{console.log(e.response)}):n("confirm_del",c=!0))}}}class Yn extends V{constructor(e){super(),G(this,e,Jn,Vn,r,["is_logged_in","getToken","id"])}}function Qn(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I,D,M,j,A=e.confirm_del?"Are you sure?":"Delete",E=new Xt({props:{mode:"add",getToken:e.getToken,table:"teachers",fields:e.add_modal_fields,table_title:"Teachers",isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen,onAdd:e.getMobilityTeachers}}),C=new Xt({props:{mode:"edit",getToken:e.getToken,table:"teachers",fields:e.edit_modal_fields,table_title:"Teachers",isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen,onEdit:e.getMobilityTeachers}}),S=new Ct({props:{getToken:e.getToken,table:"mobilities_teachers",table_headers:e.table_headers,data:e.mobility_teachers,toggle_fields:e.toggle_fields,onToggle:e.getMobilityTeachers,selectedRows:e.selectedRows,toggleRowSelect:e.toggleRowSelect,selection_field:Zn}});return{c(){E.$$.fragment.c(),t=_(),C.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Mobility Teachers</span>',i=_(),s=h("h3"),d=h("span"),c=b(e.mobility),u=_(),m=h("span"),(v=h("button")).textContent="Add +",y=_(),w=h("button"),x=b("Edit"),O=_(),N=h("button"),R=b(A),D=_(),S.$$.fragment.c(),r.className="mb-3 text-dark",d.className="border-bottom-3px border-top-3px border-dark px-2 d-inline-block",s.className="mb-3 text-dark",v.className="btn btn-success mb-2",w.className=T=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",w.id="edit-btn",N.className=I=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,N.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",j=[$(v,"click",e.handleAddButtonClick),$(w,"click",e.handleEditButtonClick),$(N,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(E,e,a),g(e,t,a),F(C,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(l,u),p(l,m),p(m,v),p(m,y),p(m,w),p(w,x),p(m,O),p(m,N),p(N,R),p(l,D),F(S,l,null),M=!0},p(e,t){var n={};e.getToken&&(n.getToken=t.getToken),e.add_modal_fields&&(n.fields=t.add_modal_fields),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),e.getMobilityTeachers&&(n.onAdd=t.getMobilityTeachers),E.$set(n);var o={};e.getToken&&(o.getToken=t.getToken),e.edit_modal_fields&&(o.fields=t.edit_modal_fields),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),e.getMobilityTeachers&&(o.onEdit=t.getMobilityTeachers),C.$set(o),M&&!e.mobility||k(c,t.mobility),M&&!e.selectedRows||T===(T=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(w.className=T),M&&!e.confirm_del||A===(A=t.confirm_del?"Are you sure?":"Delete")||k(R,A),M&&!e.selectedRows||I===(I=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(N.className=I);var a={};e.getToken&&(a.getToken=t.getToken),e.table_headers&&(a.table_headers=t.table_headers),e.mobility_teachers&&(a.data=t.mobility_teachers),e.toggle_fields&&(a.toggle_fields=t.toggle_fields),e.getMobilityTeachers&&(a.onToggle=t.getMobilityTeachers),e.selectedRows&&(a.selectedRows=t.selectedRows),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selection_field&&(a.selection_field=Zn),S.$set(a)},i(e){M||(E.$$.fragment.i(e),C.$$.fragment.i(e),S.$$.fragment.i(e),M=!0)},o(e){E.$$.fragment.o(e),C.$$.fragment.o(e),S.$$.fragment.o(e),M=!1},d(e){E.$destroy(e),e&&f(t),C.$destroy(e),e&&(f(n),f(o)),S.$destroy(),a(j)}}}function Wn(e){var t,n,o=e.is_logged_in&&Qn(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=Qn(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}let Zn="IDTeacher";function eo(e,t,n){let{is_logged_in:o,getToken:a,id:l}=t,r=[],i=[],s=[{display:"Male",value:"Male"},{display:"Female",value:"Female"}],d="",c=!1,u=!1,p=!1,g={fields:[{field:"teacherNumber",type:"text",display:"Teacher #",placeholder:"eg. p701617004",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Duarte Duarte",value:""},{field:"birthday",type:"date",display:"Birthday",placeholder:"",value:""},{field:"gender",type:"select",display:"Gender",placeholder:"Choose a gender",value:"",options:s},{field:"email",type:"email",display:"Email",placeholder:"eg. teacher.email@gmail.com",value:""}]},f={ID:null,fields:[{field:"teacherNumber",type:"text",display:"Teacher #",placeholder:"eg. p701617004",value:""},{field:"name",type:"text",display:"Name",placeholder:"eg. Duarte Duarte",value:""},{field:"birthday",type:"date",display:"Birthday",placeholder:"",value:""},{field:"gender",type:"select",display:"Gender",placeholder:"Choose a gender",value:"",options:s},{field:"email",type:"email",display:"Email",placeholder:"eg. teacher.email@gmail.com",value:""}]};function m(){ct.get(`/api/get/mobility_teachers?IDMobility=${l}`,{headers:{Authorization:a()}}).then(function(e){n("mobility_teachers",i=e.data),n("mobility",d=e.data[0].mobility);for(let e=0;e<i.length;e++){let t=new Date(new Date-new Date(i[e].birthday)).getFullYear()-1970;isNaN(t)&&(t=0),i[e].age=t,n("mobility_teachers",i),console.log(t)}console.log(e.data)}).catch(e=>{console.log(e.response)})}function h(e){n("isAddModalOpen",u=e)}function b(e){n("isEditModalOpen",p=e)}return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"getToken"in e&&n("getToken",a=e.getToken),"id"in e&&n("id",l=e.id)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&o&&m()}),{is_logged_in:o,getToken:a,id:l,selectedRows:r,mobility_teachers:i,mobility:d,table_headers:[{columnName:" ",key:"isParticipating",toggler:!0},{columnName:"Name",key:"name"},{columnName:"Teacher #",key:"teacherNumber"},{columnName:"Age",key:"age"},{columnName:"Gender",key:"gender"},{columnName:"Email",key:"email"}],toggle_fields:[{field:"IDMobility"},{field:"IDTeacher"}],confirm_del:c,isAddModalOpen:u,isEditModalOpen:p,add_modal_fields:g,edit_modal_fields:f,getMobilityTeachers:m,toggleRowSelect:function(e){let t=r.indexOf(e);-1===t?n("selectedRows",r=[...r,e]):(r.splice(t,1),n("selectedRows",r)),console.log(r)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)?console.log("Hello there General Kenobi"):(n("confirm_del",c=!1),n("selectedRows",r=[]))},setIsAddModalOpen:h,setIsEditModalOpen:b,handleAddButtonClick:function(){for(let e=0;e<g.fields.length;e++)g.fields[e].value="",n("add_modal_fields",g);h(!0)},handleEditButtonClick:function(){if(1===r.length){for(let e=0;e<i.length;e++)if(i[e][Zn]===r[0]){f.ID=r[0],n("edit_modal_fields",f);for(let t=0;t<f.fields.length;t++)"date"===f.fields[t].type?(f.fields[t].value=i[e][f.fields[t].field].slice(0,-14),n("edit_modal_fields",f),console.log(i[e][f.fields[t].field])):(f.fields[t].value=i[e][f.fields[t].field],n("edit_modal_fields",f),console.log(f.fields[t].value))}b(!0)}},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(c?r.length>0&&ct.delete("/api/delete/teachers",{data:{rows:r},headers:{Authorization:a()}}).then(e=>{n("confirm_del",c=!1),n("selectedRows",r=[]),m()}).catch(e=>{console.log(e.response)}):n("confirm_del",c=!0))}}}class to extends V{constructor(e){super(),G(this,e,eo,Wn,r,["is_logged_in","getToken","id"])}}function no(e){var t,n,o,l,r,i,s,d,c,u,m,v,y,w,x,T,O,N,R,I,D,M,j,A=e.confirm_del?"Are you sure?":"Delete",E=new Xt({props:{mode:"add",getToken:e.getToken,table:"partners",fields:e.add_modal_fields,table_title:"Partners",isOpen:e.isAddModalOpen,setIsOpen:e.setIsAddModalOpen,onAdd:e.getProjectPartners}}),C=new Xt({props:{mode:"edit",getToken:e.getToken,table:"partners",fields:e.edit_modal_fields,table_title:"Partners",isOpen:e.isEditModalOpen,setIsOpen:e.setIsEditModalOpen,onEdit:e.getProjectPartners}}),S=new Ct({props:{getToken:e.getToken,table:"partners_projects",table_headers:e.table_headers,data:e.project_partners,toggle_fields:e.toggle_fields,onToggle:e.getProjectPartners,selectedRows:e.selectedRows,toggleRowSelect:e.toggleRowSelect,selection_field:ao}});return{c(){E.$$.fragment.c(),t=_(),C.$$.fragment.c(),n=_(),o=h("div"),l=h("div"),(r=h("h2")).innerHTML='<span class="border-bottom-3px border-top-3px border-dark px-2 d-inline-block">Project Partners</span>',i=_(),s=h("h3"),d=h("span"),c=b(e.project_name),u=_(),m=h("span"),(v=h("button")).textContent="Add +",y=_(),w=h("button"),x=b("Edit"),O=_(),N=h("button"),R=b(A),D=_(),S.$$.fragment.c(),r.className="mb-3 text-dark",d.className="border-bottom-3px border-top-3px border-dark px-2 d-inline-block",s.className="mb-3 text-dark",v.className="btn btn-success mb-2",w.className=T=1!==e.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2",w.id="edit-btn",N.className=I=`btn btn-danger mb-2 ${e.selectedRows.length>=1?"":"disabled"}`,N.id="delete-btn",l.className="container rounded p-4 bg-light shadow h-max-100 d-flex flex-flow-column",o.className="p-5 position-absolute bottom-0px top-76px left-0px right-0px",j=[$(v,"click",e.handleAddButtonClick),$(w,"click",e.handleEditButtonClick),$(N,"click",e.handleDeleteClick),$(o,"click",e.handleOutsideTableClick)]},m(e,a){F(E,e,a),g(e,t,a),F(C,e,a),g(e,n,a),g(e,o,a),p(o,l),p(l,r),p(l,i),p(l,s),p(s,d),p(d,c),p(l,u),p(l,m),p(m,v),p(m,y),p(m,w),p(w,x),p(m,O),p(m,N),p(N,R),p(l,D),F(S,l,null),M=!0},p(e,t){var n={};e.getToken&&(n.getToken=t.getToken),e.add_modal_fields&&(n.fields=t.add_modal_fields),e.isAddModalOpen&&(n.isOpen=t.isAddModalOpen),e.setIsAddModalOpen&&(n.setIsOpen=t.setIsAddModalOpen),e.getProjectPartners&&(n.onAdd=t.getProjectPartners),E.$set(n);var o={};e.getToken&&(o.getToken=t.getToken),e.edit_modal_fields&&(o.fields=t.edit_modal_fields),e.isEditModalOpen&&(o.isOpen=t.isEditModalOpen),e.setIsEditModalOpen&&(o.setIsOpen=t.setIsEditModalOpen),e.getProjectPartners&&(o.onEdit=t.getProjectPartners),C.$set(o),M&&!e.project_name||k(c,t.project_name),M&&!e.selectedRows||T===(T=1!==t.selectedRows.length?"btn btn-info mb-2 mx-2 disabled":"btn btn-info mb-2 mx-2")||(w.className=T),M&&!e.confirm_del||A===(A=t.confirm_del?"Are you sure?":"Delete")||k(R,A),M&&!e.selectedRows||I===(I=`btn btn-danger mb-2 ${t.selectedRows.length>=1?"":"disabled"}`)||(N.className=I);var a={};e.getToken&&(a.getToken=t.getToken),e.table_headers&&(a.table_headers=t.table_headers),e.project_partners&&(a.data=t.project_partners),e.toggle_fields&&(a.toggle_fields=t.toggle_fields),e.getProjectPartners&&(a.onToggle=t.getProjectPartners),e.selectedRows&&(a.selectedRows=t.selectedRows),e.toggleRowSelect&&(a.toggleRowSelect=t.toggleRowSelect),e.selection_field&&(a.selection_field=ao),S.$set(a)},i(e){M||(E.$$.fragment.i(e),C.$$.fragment.i(e),S.$$.fragment.i(e),M=!0)},o(e){E.$$.fragment.o(e),C.$$.fragment.o(e),S.$$.fragment.o(e),M=!1},d(e){E.$destroy(e),e&&f(t),C.$destroy(e),e&&(f(n),f(o)),S.$destroy(),a(j)}}}function oo(e){var t,n,o=e.is_logged_in&&no(e);return{c(){o&&o.c(),t=v()},m(e,a){o&&o.m(e,a),g(e,t,a),n=!0},p(e,n){n.is_logged_in?o?(o.p(e,n),o.i(1)):((o=no(n)).c(),o.i(1),o.m(t.parentNode,t)):o&&(H(),q(()=>{o.d(1),o=null}),o.o(1),z())},i(e){n||(o&&o.i(),n=!0)},o(e){o&&o.o(),n=!1},d(e){o&&o.d(e),e&&f(t)}}}let ao="IDPartner";function lo(e,t,n){let{is_logged_in:o,getToken:a,id:l}=t,r=[],i=[],s=[],d="",c=!1,u=!1,p=!1,g={fields:[{field:"name",type:"text",display:"Name",placeholder:"eg. Escola Secundária de Loulé",value:""},{field:"IDCountry",type:"select",display:"Country",placeholder:"Choose a country",value:"",options:s},{field:"description",type:"textarea",display:"Description",placeholder:"eg. This is a school based in...",value:""}]},f={ID:null,fields:[{field:"name",type:"text",display:"Name",placeholder:"eg. Escola Secundária de Loulé",value:""},{field:"IDCountry",type:"select",display:"Country",placeholder:"Choose a country",value:"",options:s},{field:"description",type:"textarea",display:"Description",placeholder:"eg. This is a school based in...",value:""}]};function m(){ct.get(`/api/get/project_partners?IDProject=${l}`,{headers:{Authorization:a()}}).then(function(e){n("project_partners",i=e.data),n("project_name",d=e.data[0].projectName),console.log(e.data)}).catch(e=>{console.log(e.response)})}function h(){console.log("Attempting to fetch countries"),ct.get("/api/get/countries",{headers:{Authorization:a()}}).then(e=>{for(let t=0;t<e.data.length;t++)s.push({value:e.data[t].ID,display:e.data[t].country,original:e.data[t]});n("add_modal_fields",g),n("edit_modal_fields",f),console.log("Successfully fetched countries")}).catch(e=>{console.log("There was an error fetching the countries"),console.log(e.response)})}function b(e){n("isAddModalOpen",u=e)}function _(e){n("isEditModalOpen",p=e)}return e.$set=(e=>{"is_logged_in"in e&&n("is_logged_in",o=e.is_logged_in),"getToken"in e&&n("getToken",a=e.getToken),"id"in e&&n("id",l=e.id)}),e.$$.update=((e={is_logged_in:1})=>{e.is_logged_in&&o&&m()}),{is_logged_in:o,getToken:a,id:l,selectedRows:r,project_partners:i,project_name:d,table_headers:[{columnName:" ",key:"isPartner",toggler:!0},{columnName:"Name",key:"name"},{columnName:"Country",key:"country"}],toggle_fields:[{field:"IDPartner"},{field:"IDProject"}],confirm_del:c,isAddModalOpen:u,isEditModalOpen:p,add_modal_fields:g,edit_modal_fields:f,getProjectPartners:m,toggleRowSelect:function(e){let t=r.indexOf(e);-1===t?n("selectedRows",r=[...r,e]):(r.splice(t,1),n("selectedRows",r)),console.log(r)},handleOutsideTableClick:function(e){if("button"===e.target.tagName.toLowerCase())return;let t=e.currentTarget.querySelector("table");null!=t&&t.contains(e.target)?console.log("Hello there General Kenobi"):(n("confirm_del",c=!1),n("selectedRows",r=[]))},setIsAddModalOpen:b,setIsEditModalOpen:_,handleAddButtonClick:function(){0===s.length&&h();for(let e=0;e<g.fields.length;e++)g.fields[e].value="",n("add_modal_fields",g);b(!0)},handleEditButtonClick:function(){if(1===r.length){0===s.length&&h();for(let e=0;e<i.length;e++)if(i[e][ao]===r[0]){f.ID=r[0],n("edit_modal_fields",f);for(let t=0;t<f.fields.length;t++)"date"===f.fields[t].type?(f.fields[t].value=i[e][f.fields[t].field].slice(0,-14),n("edit_modal_fields",f),console.log(i[e][f.fields[t].field])):(f.fields[t].value=i[e][f.fields[t].field],n("edit_modal_fields",f),console.log(f.fields[t].value))}_(!0)}},handleDeleteClick:function(e){e.currentTarget.classList.contains("disabled")||(c?r.length>0&&ct.delete("/api/delete/partners",{data:{rows:r},headers:{Authorization:a()}}).then(e=>{n("confirm_del",c=!1),n("selectedRows",r=[]),m()}).catch(e=>{console.log(e.response)}):n("confirm_del",c=!0))}}}class ro extends V{constructor(e){super(),G(this,e,lo,oo,r,["is_logged_in","getToken","id"])}}function io(e){var t,n=new vt({props:{login:e.login}});return{c(){n.$$.fragment.c()},m(e,o){F(n,e,o),t=!0},p(e,t){var o={};e.login&&(o.login=t.login),n.$set(o)},i(e){t||(n.$$.fragment.i(e),t=!0)},o(e){n.$$.fragment.o(e),t=!1},d(e){n.$destroy(e)}}}function so(e){var t;return{c(){(t=h("div")).innerHTML='<h3 class="m-5 p-3 text-center bg-danger rounded shadow-lg d-inline-block">You must login with your account to do anything in the backoffice</h3>',t.className="container p-5 d-flex justify-content-center"},m(e,n){g(e,t,n)},d(e){e&&f(t)}}}function co(e){var t,n,o,a,l,r,i,s,d,c,u,m=!e.is_logged_in&&io(e),b=new ht({props:{is_logged_in:e.is_logged_in,logout:e.logout}}),v=new ke({props:{path:"/backoffice",component:cn,is_logged_in:e.is_logged_in,getToken:po}}),$=new ke({props:{path:"/backoffice/projects",component:cn,is_logged_in:e.is_logged_in,getToken:po}}),y=new ke({props:{path:"/backoffice/project_partners/:id",component:ro,is_logged_in:e.is_logged_in,getToken:po}}),w=new ke({props:{path:"/backoffice/mobilities/:id",component:Kn,is_logged_in:e.is_logged_in,getToken:po}}),k=new ke({props:{path:"/backoffice/mobility_students/:id",component:Yn,is_logged_in:e.is_logged_in,getToken:po}}),x=new ke({props:{path:"/backoffice/mobility_teachers/:id",component:to,is_logged_in:e.is_logged_in,getToken:po}}),T=new ke({props:{path:"/backoffice/countries",component:Wt,is_logged_in:e.is_logged_in,getToken:po}}),O=!e.is_logged_in&&so();return{c(){m&&m.c(),t=_(),b.$$.fragment.c(),n=_(),o=h("div"),v.$$.fragment.c(),a=_(),$.$$.fragment.c(),l=_(),y.$$.fragment.c(),r=_(),w.$$.fragment.c(),i=_(),k.$$.fragment.c(),s=_(),x.$$.fragment.c(),d=_(),T.$$.fragment.c(),c=_(),O&&O.c()},m(e,f){m&&m.m(e,f),g(e,t,f),F(b,e,f),g(e,n,f),g(e,o,f),F(v,o,null),p(o,a),F($,o,null),p(o,l),F(y,o,null),p(o,r),F(w,o,null),p(o,i),F(k,o,null),p(o,s),F(x,o,null),p(o,d),F(T,o,null),p(o,c),O&&O.m(o,null),u=!0},p(e,n){n.is_logged_in?m&&(H(),q(()=>{m.d(1),m=null}),m.o(1),z()):m?(m.p(e,n),m.i(1)):((m=io(n)).c(),m.i(1),m.m(t.parentNode,t));var a={};e.is_logged_in&&(a.is_logged_in=n.is_logged_in),e.logout&&(a.logout=n.logout),b.$set(a);var l={};e.Projects&&(l.component=cn),e.is_logged_in&&(l.is_logged_in=n.is_logged_in),e.getToken&&(l.getToken=po),v.$set(l);var r={};e.Projects&&(r.component=cn),e.is_logged_in&&(r.is_logged_in=n.is_logged_in),e.getToken&&(r.getToken=po),$.$set(r);var i={};e.ProjectPartners&&(i.component=ro),e.is_logged_in&&(i.is_logged_in=n.is_logged_in),e.getToken&&(i.getToken=po),y.$set(i);var s={};e.Mobilities&&(s.component=Kn),e.is_logged_in&&(s.is_logged_in=n.is_logged_in),e.getToken&&(s.getToken=po),w.$set(s);var d={};e.MobilityStudents&&(d.component=Yn),e.is_logged_in&&(d.is_logged_in=n.is_logged_in),e.getToken&&(d.getToken=po),k.$set(d);var c={};e.MobilityTeachers&&(c.component=to),e.is_logged_in&&(c.is_logged_in=n.is_logged_in),e.getToken&&(c.getToken=po),x.$set(c);var u={};e.Countries&&(u.component=Wt),e.is_logged_in&&(u.is_logged_in=n.is_logged_in),e.getToken&&(u.getToken=po),T.$set(u),n.is_logged_in?O&&(O.d(1),O=null):O||((O=so()).c(),O.m(o,null))},i(e){u||(m&&m.i(),b.$$.fragment.i(e),v.$$.fragment.i(e),$.$$.fragment.i(e),y.$$.fragment.i(e),w.$$.fragment.i(e),k.$$.fragment.i(e),x.$$.fragment.i(e),T.$$.fragment.i(e),u=!0)},o(e){m&&m.o(),b.$$.fragment.o(e),v.$$.fragment.o(e),$.$$.fragment.o(e),y.$$.fragment.o(e),w.$$.fragment.o(e),k.$$.fragment.o(e),x.$$.fragment.o(e),T.$$.fragment.o(e),u=!1},d(e){m&&m.d(e),e&&f(t),b.$destroy(e),e&&(f(n),f(o)),v.$destroy(),$.$destroy(),y.$destroy(),w.$destroy(),k.$destroy(),x.$destroy(),T.$destroy(),O&&O.d()}}}function uo(e){var t,n,o=new be({props:{url:e.url,$$slots:{default:[co]},$$scope:{ctx:e}}});return{c(){t=h("div"),o.$$.fragment.c()},m(e,a){g(e,t,a),F(o,t,null),n=!0},p(e,t){var n={};e.url&&(n.url=t.url),(e.$$scope||e.is_logged_in)&&(n.$$scope={changed:e,ctx:t}),o.$set(n)},i(e){n||(o.$$.fragment.i(e),n=!0)},o(e){o.$$.fragment.o(e),n=!1},d(e){e&&f(t),o.$destroy()}}}function po(){return localStorage.getItem("api-auth-token")}function go(e,t,n){let{url:o=""}=t,a=!1;return ct.get("/api/logincheck",{headers:{Authorization:po()}}).then(e=>{n("is_logged_in",a=!0)}).catch(e=>{n("is_logged_in",a=!1),console.log(e.response.data)}),e.$set=(e=>{"url"in e&&n("url",o=e.url)}),{url:o,is_logged_in:a,login:function(e,t){console.log("Trying to log in"),ct.post("/api/login",{username:e,password:t}).then(e=>{localStorage.setItem("api-auth-token",e.data.token),n("is_logged_in",a=!0),console.log(e.data)}).catch(e=>{console.log(e.response.data)})},logout:function(){localStorage.removeItem("api-auth-token"),n("is_logged_in",a=!1)}}}return new class extends V{constructor(e){super(),G(this,e,go,uo,r,["url"])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
